(this.$WP=this.$WP||[]).push(["poggee",(e,r)=>{var i,t,o,a,n,d,l,s,p,u,c,v,m,h,g,f,y,I,T,b=({loggedInUserId:e,args:{title:r,scrollToReference:d},onClose:l,loading:s,data:p,error:u,isIOSSafari:c})=>{var g=p&&p.tripsGetOne,y=g&&f(g,e),T=t(()=>{window.location.reload()},[]);o(()=>{y&&T()},[y,T]),o(()=>{s||g||!u||(console.error("A service error occurred in the TripModal query",u),T())},[s,g,u,T]);var[b,w]=a(!1);return i(m,{title:!b&&r,onClose:l,children:i(v,{onError:T,errorRenderer:()=>i(h,{}),children:i(n,{fallback:i(h,{}),children:!g||s||y?i(h,{}):i(I,{trip:g,scrollToReference:d,onMobileMapMaximized:c?w:void 0})})})})},w=e=>{var r=e.args.id,t=({variables:{tripId:e}})=>e===r?"invalidateAndRefetch":"validate",[o]=y({query:g,variables:{tripId:r,socialReference:!0}},{addItemToTrip:t,Trips_copyTripItem:({variables:{targetTripId:e}})=>t({variables:{tripId:e}}),tripsRemoveItem:t,tripsRemoveReference:t,updateTrip:t,organizeTrip:t,addTripItemComment:t,updateTripComment:t,tripsCommentsRemoveOne:t});return i(b,{...e,loading:o.fetching,data:o.data,error:o.error})},C=()=>{var{route:{tripModal:e,...r},navigate:o}=l(p),a=s(()=>{if(e&&"object"==typeof e&&e.id)return{tripId:e.id}},[e]),n=t(()=>{window?.history?.state!=null?(document.dispatchEvent(new CustomEvent("modalClosingEvent")),window.history.back()):o(r)},[o,r]);return a?i(u.Provider,{value:a,children:i(T,{args:e,onClose:n})}):null};return[()=>{I=d(()=>r("u311h0")),T=c(e=>({loggedInUserId:e.auth.loggedInUserId,isIOSSafari:"SAFARI"===e.meta.device.browser.family&&"IOS"===e.meta.device.os.family}))(w),e("default",C)},[e=>i=e.jsx,e=>(t=e.useCallback,o=e.useEffect,a=e.useState,n=e.Suspense,d=e.lazy,l=e.useContext,s=e.useMemo),e=>p=e.RouteContext,e=>u=e.SponsorshipTrackingContext,e=>c=e.connect,e=>v=e.ErrorBoundary,e=>(m=e.TripModalViewLayout,h=e.TripDetailSkeletonLoader),e=>g=e.GetFullTrip,e=>f=e.isTripUser,e=>y=e.useInvalidatableQuery]]},["21h32l","o4yt4q","bvvaww","k7dpqn","2mj4nv","83pm0d","t5lgqc","ag9b0s","iyqcwg","fbuhsy"]]);
