(this.$WP=this.$WP||[]).push(["y591su",(e,t)=>{var i,a,r,n,l,o,c,s,d,u,m,g,f,p,h,v,y,_,b,I,E,T,S,R,O,k,D,w,L,P,C,H,N,A,G,V,B,U,M,x,W,q,z,j,K,Q,F,X,J,Z,Y,$,ee,et,ei,ea,er,en,el,eo,ec,es,ed,eu,em,eg,ef,ep,eh,ev,ey,e_,eb,eI,eE,eT,eS,eR,eO,ek,eD,ew,eL,eP,eC,eH,eN="reefInterstitialData",eA="interact",eG="visible",eV="nonVisible",eB="USER",eU=e=>e?new Map(JSON.parse(e)):new Map,eM=(e,t,i)=>{var a=eU(e).get(t),r=new Date().getTime();return a&&a?.find(e=>e.key===i&&(!e.ttl||e.ttl>=r))||null},ex=(e,t,i,a)=>(eM(e,t,i)?.value||a)+0,eW=(e,t,i)=>eM(e,t,i)?.value||"",eq=(e,t,i,a)=>!!(eM(e,t,i)?.value??a),ez=(e,t,i,a)=>{var r=eM(e,t,i)?.value;return r&&"object"==typeof r?r[a]:null},ej=()=>C.get(eN)||"",eK=(e,t,i)=>{var a=e.get(t),r=new Date().getTime();return a=a?.filter(e=>e.key!==i.key&&(!e.ttl||e.ttl>=r))||[],i.ttl&&(i.ttl+=r),a.push(i),e.set(t,a),e},eQ=(e,t,i,a)=>{if(null!=e){var r=eU(ej());eK(r,e,{key:t,value:i,ttl:a}),C.set(eN,JSON.stringify(Array.from(r.entries())))}},eF=(e,t,i,a)=>{if(null!=e){var r=ez(ej(),e,a,t);eQ(e,a,{[t]:null==r?1:r+1},i)}},eX=(e,t,i)=>{var a=eU(H.get(eN)||"");eK(a,e,{key:t,value:i}),H.set(eN,JSON.stringify(Array.from(a.entries())))},eJ=({variant:e,displayType:t,displayCount:i,currentSessionId:a})=>{var[r,n]=v(null);return y(()=>{e&&n(eZ({variant:e,displayType:t,displayCount:i,currentSessionId:a}))},[e,t,i,a]),r},eZ=({variant:e,displayType:t,displayCount:i,currentSessionId:a})=>{var r=ed.getStorageKey(),n=ed.getObjectValueFromStorage(r,e,eG,"PER_USER"===t?eB:a),l=ed.getObjectValueFromStorage(r,e,eV,"PER_USER"===t?eB:a),o=(null==n?0:n)+(null==l?0:l);return!i||!o||!(o>=i)},eY=["Hotel_Review","Attraction_Review","AttractionProductReview"],e$=({onDismiss:e,...t})=>{var a=l(),r=eu({variant:t.variant,displayType:t.displayType,displayCount:t.displayCount??null,currentSessionId:a});return y(()=>{!1===r&&E(()=>{e()})},[r,e]),r?i(e0,{onDismiss:e,...t}):null},e0=({interstitialType:e,variant:t,displayType:a,triggerAction:r,triggerActionSeconds:n,interstitialContent:o,onDismiss:c})=>{var s=em[e]||null,[d,u]=v(!1),m=l(),{content:g,eligible:f}=o(),p=j(()=>{var e="PER_USER"===a;ed.saveObjectValueToLocalStorage(t,e?eB:m,e?es:eo,eG)});y(()=>{!1!==f&&s||E(()=>{c()})},[f,s,c]);var h=null==n?5e3:1e3*n;return y(()=>{f&&"AFTER_SECONDS"===r&&(e=setTimeout(()=>{u(!0)},h??5e3));var e,t=()=>{f&&"EXIT"===r&&u(!0)};return document.addEventListener("mouseleave",t),()=>{clearTimeout(e),document.removeEventListener("mouseleave",t)}},[f,r,h,c]),null!=s&&f&&d?i(s,{ref:p,children:g}):null},e1=()=>{var[e,t]=v(!1);return y(()=>{if("undefined"!=typeof matchMedia){var e=matchMedia("screen and (max-width: 1023px) and (min-aspect-ratio: 5/3)"),i=()=>{e.matches?t(!0):t(!1)},a="addEventListener"in e;return a?e.addEventListener("change",i):e.addListener(i),i(),()=>{a?e.removeEventListener("change",i):e.removeListener(i)}}},[]),e},e2={container:"BdAYm",autoRatioContainer:"UVcQf",fixedRatioContainer:"Asldx",media:"_T",content:"ohntd e",ratingAndDistance:"aVdix"},e3=({dates:e,disclaimer:t,title:r,primaryInfo:n,secondaryInfo:l,merchandisingText:o,rating:c,reviewCount:s,thumbnail:u,topMetaOffer:m,enforceMaxImageSize:g=!1,height:f,width:p,titleSize:h="title-04",bubbleRatingSize:v="medium",label:y})=>{var{localize:_}=d();return a("div",{children:[a("div",{className:Z(e2.container,{[e2.autoRatioContainer]:g,[e2.fixedRatioContainer]:!g}),children:[i("div",{className:e2.media,children:i(ee,{source:u,sizeHint:"200px",height:f,width:p,aspectRatio:"1:1"})}),a("div",{className:e2.content,children:[y&&y,e,r&&i(x,{variant:h,children:r}),null!=l&&m&&i(x,{variant:"supporting-01",children:l}),c&&s&&s>0&&i("div",{className:e2.ratingAndDistance,children:m?i(Y,{size:"medium",rating:c,label:i(x,{variant:"supporting-01",children:_("mobile_reviews_plural",{0:s})})}):i($,{size:v,rating:c,numReviews:s})}),null!=n&&i(x,{variant:"supporting-01",children:n}),null!=l&&!m&&i(x,{variant:"supporting-01",children:l}),null!=o&&i(x,{variant:"supporting-03",children:o}),m]})]}),t]})},e5=({condition:e,wrapper:t,children:i})=>e?t(i):i,e9={closeButton:"jXPbc _Q",actionButton:"yfVIw f F"},e6=({url:e,onClose:t,onClick:n,children:l,actionButtonLocale:o})=>{var c="MOBILE"===M(),s=e1(),{localize:u}=d();return a(r,{children:[i("div",{className:e9.closeButton,"data-automation":"interstitialClose",children:i(q,{variant:"clear",icon:J,"aria-label":u.string("common_Close"),size:"small",onClick:t})}),a(ep,{wrapper:t=>i(F,{theme:"none",href:e,onClick:n,target:"_blank",children:t}),condition:!!e,children:[l,o&&i("div",{className:e9.actionButton,children:i(W,{variant:"primary",size:c||s?"small":"medium",children:o})})]})]})},e7=["en-US"],e8=["en-GB","en-CA","de-DE","fr-FR","en-AU"],e4="HOTELS_RETARGETING",te=[[]],tt=({lastBrowsedHotel:e,now:t,abTestActive:i,abTestControlBucket:a,abTestKey:r,onControlBucket:n,onHotelsRetargetingDisplayed:l,currentSessionId:o})=>{var c=ti({lastBrowsedHotel:e,now:t,onHotelsRetargetingDisplayed:l,currentSessionId:o,abTestKey:r});return(c&&a&&n({itemType:"eligibility",additionalData:"nonVisible",experimentKey:r}),null===i)?null:i&&c||!1},ti=({lastBrowsedHotel:e,now:t,onHotelsRetargetingDisplayed:i,currentSessionId:a,abTestKey:r})=>{var{locationId:n,visitedTime:l}=e,o=ed.getStorageKey(),c=new Date(t.getTime()).setDate(t.getDate()-30);if(ta(o,e4,n)>l||l>new Date(t.getTime()).setMinutes(t.getMinutes()-30)||l<c)return!1;var s=ed.getObjectValueFromStorage(o,e4,eG,a);return!s||!(s>=1)||(i({itemType:"eligibility",additionalData:"nonVisible",experimentKey:r}),!1)},ta=(e,t,i)=>ed.getNumberFromStorage(e,t,eA+i,-1),tr=e=>{var t=e=>e<10?`0${e}`:e;return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}`},tn=e=>{var t={rooms:e?.rooms||1,adults:e?.adults||2,childAgesPerRoom:e&&e?.childAgesPerRoom||te};if(e&&e.checkInDate&&e.checkOutDate)return{isDefault:e.defaultDates,checkInDate:tr(e.checkInDate),checkOutDate:tr(e.checkOutDate),...t};var i=tl(1,7),a=new Date(i),r=new Date(a.setDate(a.getDate()+1));return{isDefault:e?.defaultDates||!0,checkInDate:tr(i),checkOutDate:tr(r),...t}},tl=(e,t)=>{var i=new Date;return i.setDate(i.getDate()+(t+(7-i.getDay()))%7+7*e),i},to={__key:4369825346815,id:"03f96de334ffa43d",loc:{},definitions:[]},tc={__key:0x7b947e2bd4ba,id:"7b947e2bd4bac8da",loc:{},definitions:[]},ts={urlTemplate:null,maxHeight:null,maxWidth:null},td=()=>{var e=o(),t=c(),[{data:i,fetching:a}]=n({query:to,variables:{recentLocationsLimit:10,uid:e}}),r="Hotel_Review"===t.page||"ShowUserReviews"===t.page?t.params.detailId:null,l=i?.insightProfile?.locations?.filter(e=>e?.location?.placeType==="ACCOMMODATION"&&e?.location?.locationV2?.locationId!==r&&e?.location?.defaultUrl?.startsWith("/Hotel_Review")),s=l&&l.length>0?l[0]:null,d=s?.location?.locationV2?.locationId??-1,[{data:u,fetching:m}]=n({query:tc,variables:{locationId:d},pause:-1===d}),g={locationId:d,parentGeoId:s?.location?.locationV2?.hierarchy?.parentGeoId??-1,rating:s?.location?.reviewSummary?.rating??-1,count:s?.location?.reviewSummary?.count??-1,name:s?.location?.locationV2?.names?.name??"",longOnlyHierarchyTypeaheadV2:s?.location?.locationV2?.names?.longOnlyHierarchyTypeaheadV2??"",url:s?.location?.defaultUrl??"",urlHH:u?.Routing_canonicalize?.[0]?.url??"",photoSizeDynamic:s?.location?.thumbnail?.photoSizeDynamic??ts,visitedTime:s?.timestamp??-1},f=Object.entries(g).some(([,e])=>-1===e||""===e||JSON.stringify(e)===JSON.stringify(ts));return{...g,fetching:a||m,isUndefinedLastBrowsedHotel:f}},tu={__key:0xaa3f3775b1b,id:"0aa3f3775b1b123f",loc:{},definitions:[]},tm=e=>{var t=c(),i=u(),a=o(),r=l(),{hotels:n}=N(),s=b(tn(n)),{isOptimusSubscriber:d}=G(),[{data:m}]=A({query:tu,variables:{request:{hotelId:e,currencyCode:i,requestCaller:t.page,sessionId:r,impressionPlacement:"hotel-retargeting-interstitial",pageLoadUid:a,travelInfo:{checkInDate:s.current.checkInDate,checkOutDate:s.current.checkOutDate,rooms:s.current.rooms,adults:s.current.adults,usedDefaultDates:s.current.isDefault,childAgesPerRoom:s.current.childAgesPerRoom}}},pause:-1===e||!0===d,isResultComplete:e=>!!e?.data?.HPS_getWebHROffers?.complete});if(m?.HPS_getWebHROffers?.complete&&m?.HPS_getWebHROffers?.chevronOffers){var g=m.HPS_getWebHROffers.chevronOffers;if(g&&g.length>0){var f=g[0];if(f?.providerDisplayName&&f?.providerLogoUrl&&f?.additionalData?.commerceUrl&&f?.priceText)return{isUndated:s.current.isDefault,checkInDate:s.current.checkInDate,checkOutDate:s.current.checkOutDate,isDisplayableOffer:!0,isComplete:m.HPS_getWebHROffers.complete,provider:f.providerDisplayName,logoUrl:f.providerLogoUrl,displayPrice:f.priceText,strikethroughPrice:f.strikeThroughText,commerceUrl:f.additionalData.commerceUrl,pricingMode:m.HPS_getWebHROffers?.pricingMode}}}return{isUndated:s.current.isDefault,checkInDate:s.current.checkInDate,checkOutDate:s.current.checkOutDate,isDisplayableOffer:!1,isComplete:m?.HPS_getWebHROffers?.complete||!1}},tg="TAPS",tf="hotelsRetargetingInterstitial",tp=(e,t)=>{var{params:i}=c(),a=U(),r=V(),n=B(),l=m().formatDate("date_short",new Date(e.visitedTime),"America/New_York");return{trackInteraction:I(({actionType:n,actionSubType:o,additionalClientData:c,experimentKey:s})=>{r({actionType:n,actionSubType:o,additionalClientData:c,itemName:tf,itemId:`${e.locationId}`,page:a,geoId:"geoId"in i&&i.geoId||null,locationId:"locationId"in i&&i.locationId||null,team:tg,customData:JSON.stringify({isDatedOffer:!t.isUndated,offerProvider:t.provider,lastVisit:l,lastVisitTimestamp:e.visitedTime,experimentKey:s})})},[r,e,t,l,i,a]),trackImpression:I(({itemType:r,experimentKey:o,additionalData:c})=>{n({itemName:tf,itemId:`${e.locationId}`,itemType:r,page:a,geoId:"geoId"in i&&i.geoId||null,locationId:"locationId"in i&&i.locationId||null,team:tg,customData:JSON.stringify({isDatedOffer:!t.isUndated,offerProvider:t.provider,lastVisit:l,lastVisitTimestamp:e.visitedTime,experimentKey:o,additionalData:c})})},[n,e,t,l,i,a])}},th=()=>{var{page:e}=c(),t=g(),i=Q(),a=N(),r=!a.hotels?.defaultDates,n=e7.includes(t),l=e8.includes(t),o="";n?o="hotels_retargeting_int_meta_v3_1_1692799909":l&&(o="hotels_retargeting_int_meta_v3_2_1692799998");var s=K({experimentKeys:[o],page:e,userEnteredDates:r,userId:i||void 0},!(n||l)),d=s?.[o];return{isEligible:"test"===d,isControl:"control"===d,experimentKey:o}},tv={modalBody:"qUZKX",productItems:"Q3 f e",primaryInfo:"XeQat",content:"fHpuP",propertyName:"bIBvK",offerContainer:"BsebC f M k",offerContainerLink:"ZAlNp",prices:"ojfkl",strikethroughPrice:"KXYWO _n Cb Wa",displayPrice:"qiPiv",displayPriceNoProvider:"WwaVd",viewDealContainer:"I",provider:"FoZgz",disclaimer:"ewKnA"},ty=({lastBrowsedHotel:e,topMetaOffer:t,now:r,onInteraction:n})=>{var l="MOBILE"===M(),o=e1(),c=l||o,d=m(),u=e_.useIncrementCallback("+ZKWsqGusp3Xa5cP0+5xbJ4cQ01OORwaEfv6ffdUFeU="),g=e_.useIncrementCallback("+ZKWsqGusp3Xa5cP0+5xbJjERL83Quf47VgLUEfMgGM="),f=e_.useIncrementCallback("+ZKWsqGusp3Xa5cP0+5xbNczaJW0H6qB/FL1/Ey9fGERGAkBafUMa47NpHfc7W2c"),p=e_.useIncrementCallback("+ZKWsqGusp3Xa5cP0+5xbHZToaW5PnvsCd/MT0vrWS4FSsMAwgupzlZEcyWrm7d1"),{isEligible:h,experimentKey:v}=ey(),y=eb[t.pricingMode||"BASE_RATE"],{rating:_,count:b,name:E,longOnlyHierarchyTypeaheadV2:T,photoSizeDynamic:S}=e,R=i("div",{className:tv.primaryInfo,children:T}),O=(h?t.commerceUrl:e.url)||e.url,k=t.isDisplayableOffer&&t.commerceUrl&&t.provider&&t.displayPrice,{trackInteraction:D,trackImpression:w}=ev(e,t),L=j(()=>{w({itemType:"view",experimentKey:v}),u()}),P=I(()=>{var t=r.setSeconds(r.getSeconds()+30);ed.saveValueToLocalStorage(e4,eA+e.locationId,t,ec),n()},[e,r,n]),C=I(e=>{e.stopPropagation(),D({actionType:"click",actionSubType:"hotelCta",experimentKey:v}),p(),P()},[D,p,P,v]),H=I(e=>{e.stopPropagation(),D({actionType:"click",actionSubType:"commerceCta",experimentKey:v}),f(),P()},[D,f,P,v]),N=I(()=>{D({actionType:"click",actionSubType:"dismiss",experimentKey:v}),g(),P()},[D,g,P,v]);return k&&i(eh,{url:e.url,onClick:C,onClose:N,children:a("div",{className:tv.content,ref:L,children:[a(x,{variant:c?"title-04":"title-03",marginBottom:"spacing-03",children:[i(s,{id:"hotels_retargeting_meta_h1_v1"})," "]}),i("div",{className:tv.modalBody,children:i("div",{className:tv.productItems,children:i(ef,{dates:a(x,{variant:"supporting-02",children:[d.formatDate("week_date_short_year_long",new Date(t.checkInDate))," - ",d.formatDate("week_date_short_year_long",new Date(t.checkOutDate))]}),disclaimer:i("div",{className:tv.disclaimer,children:i(x,{variant:"supporting-02",children:y})}),title:i("div",{className:tv.propertyName,children:E}),secondaryInfo:R,rating:_,reviewCount:b,thumbnail:S,topMetaOffer:i("a",{href:O,target:"_blank",onClick:h?H:C,className:tv.offerContainerLink,children:a("div",{className:tv.offerContainer,children:[a("div",{children:[a("div",{className:tv.prices,children:[t.strikethroughPrice&&i("span",{className:tv.strikethroughPrice,children:i(x,{variant:"title-04",color:"strikethroughText",marginBottom:"spacing-02",children:t.strikethroughPrice})}),i("span",{className:h?tv.displayPrice:tv.displayPriceNoProvider,children:i(x,{variant:"title-04",marginBottom:"spacing-02",children:t.displayPrice})})]}),h&&a("div",{className:tv.provider,children:[i(x,{variant:"supporting-02",display:"inline",children:t.provider}),i(z,{size:16})]})]}),i("div",{className:tv.viewDealContainer,children:i(W,{target:"_blank",href:O,variant:"commerce",size:"small",children:i(s,{id:"view_deal_button_cta"})})})]})}),enforceMaxImageSize:!0,height:c?80:100,width:c?80:100,titleSize:c?"title-05":"title-04",bubbleRatingSize:c?"small":"medium"})})})]})})},t_=()=>{var e=b(new Date),[t,a]=v(null),[r,n]=v(!1),o=td(),c=tm(o.locationId),s=l(),{isEligible:d,isControl:u,experimentKey:m}=ey(),g=I(()=>!o.isUndefinedLastBrowsedHotel&&c.isDisplayableOffer,[o,c]),f=T(()=>null===t||o.fetching||!c.isComplete,[t,o,c]),p=T(()=>t&&!f,[t,f]),{trackImpression:h}=ev(o,c),_=I(e=>{n(!0),h(e)},[h]),E=I(e=>{h(e)},[h]),S=()=>a(!1);return y(()=>{o.fetching||!c.isComplete||r||a(!!g()&&tt({lastBrowsedHotel:o,abTestActive:d,abTestControlBucket:u,abTestKey:m,now:e.current,onControlBucket:_,onHotelsRetargetingDisplayed:E,currentSessionId:s}))},[o,c,d,u,m,e,r,s,_,E,g]),y(()=>{p||f||(ed.saveObjectValueToLocalStorage(e4,s,eo,eV),a(!1))},[p,f,s]),{content:T(()=>i(eI,{lastBrowsedHotel:o,topMetaOffer:c,now:e.current,onInteraction:S}),[o,c]),eligible:p}},tb="EXPERIENCES_RETARGETING",tI=["AttractionsNear","AttractionsFusion","Attraction_Review","AttractionProductsFusion","AttractionProductReview"],tE={urlTemplate:null,maxHeight:null,maxWidth:null},tT=({lastBrowsedExperience:e,now:t})=>tS({lastBrowsedExperience:e,now:t})||!1,tS=({lastBrowsedExperience:e,now:t})=>{var{locationId:i,visitedTime:a}=e,r=ed.getStorageKey(),n=new Date(t.getTime()).setDate(t.getDate()-30),l=new Date(t.getTime()).setMinutes(t.getMinutes()-30);return!(tR(r,tb,i)>a)&&!(a>l)&&!(a<n)},tR=(e,t,i)=>ed.getNumberFromStorage(e,t,eA+i,-1),tO={__key:74708966176939,id:"43f28963f8ab883a",loc:{},definitions:[]},tk={__key:23097584714926,id:"1501d35504ae5233",loc:{},definitions:[]},tD={__key:0x8fb8a9dd2db2,id:"8fb8a9dd2db21e8e",loc:{},definitions:[]},tw={__key:0x67f3222a1d5e,id:"67f3222a1d5e299c",loc:{},definitions:[]},tL=()=>{var e=o(),t=u(),i=p(),a=et(),r=Q(),{page:l,params:s}=c(),d="geoId"in s&&s.geoId||-1,m=!!eE.get(d),[{data:g,fetching:f}]=n({query:tO,variables:{recentLocationsLimit:10,uid:e,currency:t},pause:m}),{experience:h,location:v}=T(()=>{var e="AttractionProductReview"===l?s.detailId:null,t=g?.insightProfile?.locations?.filter(e=>e?.location?.placeType==="ACTIVITY"&&e?.location?.defaultUrl?.startsWith("/AttractionProductReview")),i=t&&t.length>0?t[0]:null,a=t&&t.length>1?t[1]:null,r=i?.location?.locationV2?.locationId!==e?i:null,n=null===r?a:r;return{experience:n,location:n?.location?.locationV2?.locationId??-1}},[l,s,g]),[{data:y,fetching:_}]=n({query:tk,variables:{locationId:v},pause:-1===v}),b=y?.Routing_canonicalize?.[0]?.url??"",I=tI.includes(l),[{data:E,fetching:S}]=n({query:tD,variables:{cartless:!1,currency:t,locale:i,memberId:r,taUniqueId:a},pause:!I||-1===v}),[{data:R,fetching:O}]=n({query:tD,variables:{cartless:!0,currency:t,locale:i,memberId:r,taUniqueId:a},pause:!I||-1===v}),k=T(()=>{var e=E?.cartCheckoutSummary,t=e&&e.itemCount,i=R?.cartCheckoutSummary,a=i&&i.itemCount;return!!(t&&e.itemCount>0||a&&i.itemCount>0)},[E,R]),[{data:D,fetching:w}]=n({query:tw,pause:-1===v||!r}),L=T(()=>{var e=D?.upcomingBookings;return e&&e.length>0?e.filter(Boolean)[0].tourBookings?.map(e=>e?.productCode).filter(Boolean)??[]:[]},[D]),{isFetchingExperience:P,experience:C,isUndefined:H}=T(()=>{var e=f||_||S||O||w,t=tP({experienceLocation:h,highlightUrl:b});return{isFetchingExperience:e,experience:t,isUndefined:Object.entries(t).some(([e,t])=>"label"!==e&&(-1===t||""===t||ei(t,tE)))}},[h,b,f,_,S,O,w]);return T(()=>({...C,fetching:P,isUndefinedLastBrowsedExperience:H,upcomingBookingsProductCodes:L,cartOrCheckoutHasItems:k,isSuppressedGeoId:m}),[C,P,H,L,k,m])},tP=({experienceLocation:e,highlightUrl:t})=>{var i=e?.location?.locationV2?.details,a=i?.__typename==="LocationSelection_AttractionProductDetails",r=a?i.productDetails?.productCode:null,n=a&&i.productDetails?.productLabels&&i.productDetails?.productLabels?.length>0?i.productDetails.productLabels[0]:null;return{locationId:e?.location?.locationV2?.locationId??-1,parentGeoId:e?.location?.locationV2?.hierarchy?.parentGeoId??-1,rating:e?.location?.reviewSummary?.rating??-1,count:e?.location?.reviewSummary?.count??-1,name:e?.location?.locationV2?.names?.name??"",longOnlyHierarchyTypeaheadV2:e?.location?.locationV2?.names?.longOnlyHierarchyTypeaheadV2??"",url:e?.location?.defaultUrl??"",urlAph:t,photoSizeDynamic:e?.location?.thumbnail?.photoSizeDynamic??tE,visitedTime:e?.timestamp??-1,productCode:r??"",label:n??""}},tC="experiencesRetargetingInterstitial",tH=e=>{var{params:t}=c(),i=U(),a=V(),r=B(),n=m().formatDate("date_short",new Date(e.visitedTime),"America/New_York");return{trackInteraction:I(({actionType:r,actionSubType:l,additionalClientData:o})=>{a({actionType:r,actionSubType:l,additionalClientData:o,itemName:tC,itemId:`${e.locationId}`,page:i,geoId:"geoId"in t&&t.geoId||null,locationId:"locationId"in t&&t.locationId||null,customData:JSON.stringify({lastVisit:n,lastVisitTimestamp:e.visitedTime,label:e.label,productCode:e.productCode})})},[a,e,n,t,i]),trackImpression:I(()=>{r({itemName:tC,itemId:`${e.locationId}`,page:i,geoId:"geoId"in t&&t.geoId||null,locationId:"locationId"in t&&t.locationId||null,customData:JSON.stringify({lastVisit:n,lastVisitTimestamp:e.visitedTime,label:e.label,productCode:e.productCode})})},[r,e,n,t,i])}},tN=({url:e,lastBrowsedExperience:t,now:r,onInteraction:n})=>{var l="MOBILE"===M(),o=e1(),c=eS.useIncrementCallback("Lf2+DkGVHxREiH4fJ+91SD8UtWkLYHIseHXP3sgFge5QBMxFGcUAV19Y8J6tIXxu"),d=eS.useIncrementCallback("Lf2+DkGVHxREiH4fJ+91SMAoEzVbI4A904PUQ0Lh23JAjeXV1nRtQ7Vn4qds+eRQ"),{trackInteraction:u,trackImpression:m}=eT(t),g=j(()=>{m(),c()}),f=I(()=>{var e=r.setSeconds(r.getSeconds()+30);ed.saveValueToLocalStorage(tb,eA+t.locationId,e,ec),n()},[t,r,n]),p=I(()=>{u({actionType:"click",actionSubType:"cta"}),f()},[u,f]),h=I(()=>{u({actionType:"click",actionSubType:"dismiss"}),d(),f()},[u,f,d]),{rating:v,count:y,name:_,longOnlyHierarchyTypeaheadV2:b,photoSizeDynamic:E,label:T}=t,S=i("div",{className:"kaYqN",children:b}),R=eR[T]||eR.DEFAULT,O=i("div",{children:ea({isBestSeller:"BEST_SELLER"===T,isLtso:"LIKELY_TO_SELL_OUT"===T,isSpecialOffer:!1,isRNPLEligible:!1})});return i(eh,{url:e,onClick:p,onClose:h,actionButtonLocale:i(s,{id:"content_widget_view_now"}),children:a("div",{className:"YhbUS",ref:g,children:[i(x,{variant:l||o?"title-04":"title-03",marginBottom:"spacing-03",children:R}),i(ep,{wrapper:e=>i(X,{theme:"standalone",children:e}),condition:!!e,children:i("div",{className:"wsWfm",children:i("div",{className:"Q3 f e",children:i(ef,{title:_,secondaryInfo:S,rating:v,reviewCount:y,thumbnail:E,enforceMaxImageSize:!0,height:l||o?100:130,width:l||o?100:130,titleSize:l||o?"title-05":"title-04",bubbleRatingSize:l||o?"small":"medium",label:O})})})})]})})},tA=()=>{var e=b(new Date),t=l(),[a,r]=v(null),n=tL(),o=I(()=>{var e=n.upcomingBookingsProductCodes.includes(n.productCode);return!n.isUndefinedLastBrowsedExperience&&!n.cartOrCheckoutHasItems&&!e&&!n.isSuppressedGeoId},[n]),c=T(()=>null===a||n.fetching,[a,n]),s=T(()=>a&&!c,[a,c]),d=()=>r(!1);return y(()=>{n.fetching||r(!!o()&&tT({lastBrowsedExperience:n,now:e.current}))},[n,e,o]),y(()=>{s||c||(ed.saveObjectValueToLocalStorage(tb,t,eo,eV),r(!1))},[s,c,t]),{content:T(()=>i(eO,{url:n.urlAph,lastBrowsedExperience:n,onInteraction:d,now:e.current}),[n,e]),eligible:s}},tG=({tier:e,...t})=>{var a=e=>i(eg,{...t,onDismiss:e}),r=`reef-interstitial-${t.variant}`;return L({factory:({dismiss:e})=>a(e),eventTypes:[r],key:r,tier:e}),null},tV=({interstitialType:e,variant:t,displayType:a,triggerAction:r,tier:n,...l})=>{var o=t?ek[t]:ek.DEFAULT;return null!=e&&null!=t&&null!=a&&null!=r&&null!=n&&"function"==typeof o?i(tG,{...l,interstitialType:e,variant:t,displayType:a,triggerAction:r,tier:n,interstitialContent:o}):null},tB=e=>null!=e&&eD[e]||null,tU=({section:e})=>{var{interstitialType:t,variant:a,displayType:r,displayCount:n,triggerAction:l,triggerActionSeconds:o,tier:c}=e,s=tB(t);return null==s?null:i(s,{interstitialType:t,variant:a,displayType:r,displayCount:n,triggerAction:l,triggerActionSeconds:o,tier:c})},tM={RECO_EVERGREEN_PROMO:"IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HEoA0pavHo8ZegLdKuAXMwlSVAUioSqSfbhWNo8k7pG6A==",TOAST_HOTELS_RETARGETING:"IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HGQlsqxsB5szuOcEzcC9wipxNeHRzn01q+/0TP8dtKvmQ==",TOAST_EXPERIENCES_RETARGETING:"IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HG1z+zk8K8scEsNeK8fhnZ7KyF4syhWByW8zB9uzh9VEV5hiXJ3zCK2iYyzm9nVYSQ=",OTHER:"IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HEqXfV3HzV7e05O2IcEfNAJ"},tx={network_error:"IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qircBiIPCEz4z1HeuAfxIpy7VFMSOPMXf5/nixfONlabA==",graphql_error:"IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qgtMp0nTcSh3jpjy88r0UI28yyCz4VtlDV/rBR+Xtjhqg==",partial_feed:"IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qinJm+/7boTbgRQk9UV4fv38Tb9z3GLGfVn0ZgK5V08oQ==",empty_feed:"IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qhApcrKW4wwXxUlvwVgxdXc",ok:"IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qjaxtN4egnIGOD/DetFZpdR"},tW=["Home","Tourism","Hotels","Hotel_Review","HotelHighlight","HotelsList","HotelsNear","Attractions","Attraction_Review","Attraction_Products","AttractionProductReview","ShowTopic","ShowForum","ShowUserReview"],tq={__key:0xfa5da6ee0b1d,id:"fa5da6ee0b1deed3",loc:{},definitions:[]},tz=({data:e,error:t,fetching:i})=>i?null:t?.networkError!=null?"network_error":t?.graphQLErrors!=null?"graphql_error":e?.feed?.status?.partial===!0?"partial_feed":0===(e?.feed?.sectionGroups??[]).filter(Boolean).length?"empty_feed":"ok",tj=({type:e,variant:t,feedStatus:i})=>{var a=null==i?null:eH.get(i),r=e??tM.OTHER,n=t??tM.OTHER;return eP.useIsomorphicIncrement(null==a?0:1,"RECO_EVERGREEN_PROMO"===r?tM.RECO_EVERGREEN_PROMO:eC.get(`${r}_${n}`)??tM.OTHER,a??tx.ok),null},tK={DESKTOP:"DESKTOP",TABLET:"TABLET_WEB",MOBILE:"MOBILE_WEB"},tQ=()=>{var{page:e,params:t}=c();return T(()=>"Hotel_Review"===e&&1===t.showHighlightOnHR?"HotelHighlight":e,[e,t])},tF=()=>{var e=u(),t=o(),s=l(),{params:d}=c(),m=tQ(),{userAgentCategory:g}=h();!function(e){var[t,i]=v(!1),a=eL.useIncrementCallback(),r=!t&&tW.includes(e),n=I(e=>{e.clientY<=0&&(i(!0),a())},[a]);y(()=>(r&&document.addEventListener("mouseleave",n),()=>{document.removeEventListener("mouseleave",n)}),[n,r])}(m);var f="geoId"in d&&d.geoId||null,[{data:p,error:_,fetching:b}]=n({query:tq,variables:{uid:t,sessionId:s,currency:e,sessionType:tK[g],locationId:f,page:m}}),E=tz({data:p,error:_,fetching:b});if(b)return null;if(!p||_)return a(r,{children:[i(w,{placementKey:"INTERSTITIAL",feedStatus:E}),i(tj,{feedStatus:E})]});var T=(p?.feed?.sectionGroups??[]).filter(Boolean).map(e=>e?.__typename==="Mixer_SingleSection"?e?.section:null).filter(Boolean);return 0===T.length?null:a(r,{children:[i(w,{placementKey:"INTERSTITIAL",feedStatus:E}),T.map(e=>a(S,{children:[i(tj,{type:e.interstitialType,variant:e.variant,feedStatus:E}),i(ew,{section:e},e.sectionId)]},e.sectionId))]})};return[()=>{es=12*(ec=30*(eo=864e5)),ed={getNumberFromStorage:ex,getBooleanFromStorage:eq,getStringFromStorage:eW,getObjectValueFromStorage:ez,getStorageKey:ej,saveValueToLocalStorage:eQ,saveObjectValueToLocalStorage:eF,saveValueToSessionStorage:eX},eu=eJ,em={TOAST:_(function({children:e},t){var[a,r]=v(!0),n=b(null),l=U(),o="MOBILE"===M(),c=el();return en("scroll",I(()=>{r(!0),eY.includes(l)&&o&&n.current&&n.current instanceof HTMLDivElement&&window.pageYOffset>100&&r(!1)},[o,l,n])),i(er,{ref:n,hideBackdrop:!0,disableBlockScroll:!0,className:Z("VpFpT D w",c),children:i("div",{ref:t,className:Z("Fjfzk f e H Gg Ra",{dhZoz:!a}),children:e})})})},eg=e$,ef=e3,ep=e5,eh=e6,ev=tp,ey=th,e_=new R({metricName:"+ZKWsqGusp3Xa5cP0+5xbE3eeaK0yJPJ6/SJbhw1BmULND8bCPXfCZ8IPTsZdLv2FEIjtcI26JCbE/TCUmc3ztlTcLaxu5Hki3W2CpURCn0=",version:0,additionalLabels:["+ZKWsqGusp3Xa5cP0+5xbNj/ZUKmy1asxgPSO7q56yJTBTBGU8ApNmOA5zkJocGW33fxVSJheZYiCeiT6ILB7a08QlMcfRHKj0vID480aPE="],labelHooks:[O,k]}),eb={ALL_IN_FULL_STAY:i(f,{id:"hot_retarg_all_in_total_stay_pricing_disclaimer"}),ALL_IN_RATE:i(f,{id:"hot_retarg_all_in_pricing_disclaimer"}),ALL_IN_WITH_EXCLUSIONS:i(f,{id:"hot_retarg_all_in_light_pricing_disclaimer"}),BASE_RATE:i(f,{id:"hot_retarg_base_pricing_disclaimer"})},eI=ty,eE=new Map([[28970,"Washington DC"],[54171,"Charleston"],[35805,"Chicago"]]),eT=tH,eS=new R({metricName:"Lf2+DkGVHxREiH4fJ+91SCVHDEQ8B3PCtmhT4hc3NZ8WVIaftSeyLGH8bhEdQOpWkybKpzh3+9A/kvaBgPXiB8xmsWL03tpjdPwfkg8sTQ8=",version:0,additionalLabels:["Lf2+DkGVHxREiH4fJ+91SFfM+b0kUXdkghUpXJrcZcgoZvloAeqqM1509ifxpxD652JZ2fHHZSuIbja8yCQVaQgAHP3XDDOlKECrmcnDieg="],labelHooks:[O,k]}),eR={BEST_SELLER:i(s,{id:"experiences_retargeting_social_proof_title"}),LIKELY_TO_SELL_OUT:i(s,{id:"experiences_retargeting_urgency_title"}),DEFAULT:i(s,{id:"last_viewed_hotels_interstitial_title"})},eO=tN,ek={HOTELS_RETARGETING:t_,EXPERIENCES_RETARGETING:tA,DEFAULT:()=>({})},eD={RECO_EVERGREEN_PROMO:P,TOAST:tV},ew=tU,eL=new R({metricName:"oRKXgWqBI9jehajWLUBNpHp7vdqcPhuBQ7WQzHYcX0fNHYSk5ujJpEp7fWibeuGw01kMzKeVuPIJ3qZOjDAaBw==",version:0,additionalLabels:["oRKXgWqBI9jehajWLUBNpKJjzPxEHg1R3QmGdwBRGKmESfCLTL1demUtO3qB9inSqbRAuwKz8+CaOAydtClqJg=="],labelHooks:[O,k]}),eP=new R({metricName:"IPGggjy++6MSbQG5eff2Ues+FxaoNhiMclrp7dl0Uz+3fC1OlO4iA8rRWVvaPMqqYmtbq/gdPbHYvcz9q2oQMMxyX5nW+UrVVz5WkFjuVOKf1gSxoyYZgl5ZRKtWouPb",version:0,additionalLabels:["IPGggjy++6MSbQG5eff2UXLvzfsQhqYiG/2bLzmnqsVHzHrNxLmOUfPiQ3dBdO+tLH1Gxh7D7cf4iarIXw7OQg=="],labelHooks:[O,D,k]}),eC=new Map([["TOAST_HOTELS_RETARGETING",tM.TOAST_HOTELS_RETARGETING],["TOAST_EXPERIENCES_RETARGETING",tM.TOAST_EXPERIENCES_RETARGETING],["RECO_EVERGREEN_PROMO",tM.RECO_EVERGREEN_PROMO]]),eH=new Map([["network_error",tx.network_error],["graphql_error",tx.graphql_error],["partial_feed",tx.partial_feed],["empty_feed",tx.empty_feed],["ok",tx.ok]]),e("default",tF)},[e=>(i=e.jsx,a=e.jsxs,r=e.Fragment),e=>n=e.useQuery,e=>l=e.useSessionId,e=>(o=e.usePageviewUid,c=e.useRoute),e=>(s=e.default,d=e.useLocalize,u=e.useCurrency,m=e.useIntlFormatter,g=e.useLocale,f=e.UnsafeLocalize,p=e.useLanguage),e=>h=e.useUserAgent,e=>(v=e.useState,y=e.useEffect,_=e.forwardRef,b=e.useRef,I=e.useCallback,E=e.startTransition,T=e.useMemo,S=e.Fragment),e=>(R=e.Counter,O=e.useSourceLabel,k=e.useWebApplicationLabel,D=e.useRenderLabel),e=>w=e.MixerFeedStatusCounter,e=>L=e.usePopupHierarchyRender,e=>P=e.RecoAds,e=>C=e.default,e=>H=e.default,e=>N=e.useTravelInfo,e=>A=e.usePollingQuery,e=>G=e.default,e=>V=e.default,e=>B=e.default,e=>U=e.default,e=>M=e.useViewportCategory,e=>x=e.default,e=>(W=e.default,q=e.CircularButton),e=>z=e.default,e=>j=e.useOnVisible,e=>K=e.useAbTestWithSegments,e=>Q=e.useUserId,e=>(F=e.default,X=e.LinkStyle),e=>J=e.default,e=>Z=e.default,e=>(Y=e.BubbleRatingWithLabel,$=e.BubbleRatingWithReviewCount),e=>ee=e.default,e=>et=e.useDeviceId,e=>ei=e.default,e=>ea=e.buildProductDataLabels,e=>er=e.ModalBase,e=>en=e.useWindow,e=>el=e.useKeyboardFocusableClassName]]},["21h32l","mqwhqn","al4vil","fgwvq1","7thqz4","nnprhg","o4yt4q","83pm0d","00m0uy","xo1is3","dlfdm7","9b9b10","tp1g68","etaac9","fbuhsy","g6kunc","r73jw8","xg719z","eqoaya","ys6v1o","essqvy","jppfwt","evvugf","3btuy0","gugp1d","52far5","lr6tb6","qkjm8h","fkji80","bkeq24","34bu7w","p5p2yo","b5nukb","7ovr7c","uzmmz7","ltllz9","2r4qug"]]);
