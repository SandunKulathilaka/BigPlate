(this.$WP=this.$WP||[]).push(["904jnz",(e,t)=>{var a,r,n,o,s,i,c,u,_,l,E,d,S,v,m,T,C,I,D,g,R,h,P,M,A,f,O,N,L,H,p,U,b,G,w,B=["IB_CLICK","CLICKOUT","ENTER_DATES","EXP_IB_CONFIRM","BA_SOJERN_BL_CLICK","HOTEL_LIST_VIEW","ATTRACTION_LIST_VIEW","HOTEL_IB_CONFIRM","SHOPPING_CART_LIST","SELECT_B2B_HOTEL_PRODUCT","SELECT_B2B_RESTAURANT_PRODUCT","PURCHASE_B2B_HOTEL_PRODUCT","PURCHASE_B2B_RESTAURANT_PRODUCT","HS_SEM_REVIEW_HUB_SELECT_LISTING","HS_SEM_ADS_SELECT_LISTING","HS_SEM_PREMIUM_SELECT_LISTING","HS_SEM_REVIEW_HUB_SELECT_PRODUCT","HS_SEM_ADS_SELECT_PRODUCT","HS_SEM_PREMIUM_SELECT_PRODUCT","HS_SEM_REVIEW_HUB_PRODUCT_PURCHASE","HS_SEM_ADS_PRODUCT_PURCHASE","HS_SEM_PREMIUM_PRODUCT_PURCHASE","HS_SEM_SPONSORED_PLACEMENTS_CLAIM_HOTEL","HS_SEM_BUSINESS_ADVANTAGE_CLAIM_HOTEL","HS_SEM_REPUTATION_PRO_CLAIM_HOTEL","HS_SEM_SPONSORED_PLACEMENTS_PAYMENT_PAGE","HS_SEM_BUSINESS_ADVANTAGE_PAYMENT_PAGE","HS_SEM_REPUTATION_PRO_SELECT_PAYMENT_PAGE","HS_SEM_SPONSORED_PLACEMENTS_ORDER_CONFIRMATION","HS_SEM_BUSINESS_ADVANTAGE_ORDER_CONFIRMATION","HS_SEM_REPUTATION_PRO_ORDER_CONFIRMATION"],k={enabled:!0,scriptSrcPath:"/static/gtm/gtm.html",scriptSrcHostDomain:"https://www.jscache.com",scriptSrcQueryParams:"",monitoringEnabled:!0},y={MOBILE:2e3,TABLET:2e3,DESKTOP:2e3},q={},V={},W=(e,t)=>t?`${e.scriptSrcHostDomain}${e.scriptSrcPath}?gtmParams=${e.scriptSrcQueryParams}&parentDomain=${encodeURIComponent(t)}`:null,$=()=>{var e=v.get("pbjs_identitylink");return e?.envelope?.envelope},F=e=>K(e)?f:O,K=e=>!!(e.startsWith("hare")||e.match("\\.qa.tripadvisor-preview")),x=(e,t)=>e.enabled&&!V[t],j=e=>{switch(e){case"IB_CLICK":case"CLICKOUT":case"PAGEVIEW":case"BA_SOJERN_BL_CLICK":case"BA_SOJERN_BL_IMPRESSION":return!0;default:return!1}},Y=e=>B.includes(e),Q=(e,t,a,r,n,o)=>{e({event:"ENTER_DATES",data:{startDate:t?.toLocaleDateString("en-US")||"",endDate:a?.toLocaleDateString("en-US")||"",numberGuests:r||0,numberRooms:n||0,isDefaultDates:o||!1}})},z=e=>{var[t,a]=n(!1);return o(()=>{var t=setTimeout(()=>a(!0),e);return()=>clearTimeout(t)},[e]),t},J=()=>{var[e,t]=n(!1);return o(()=>{var e,a=T(a=>{null!=a?t(!0):e=requestIdleCallback(()=>t(!0))});return()=>{e&&cancelIdleCallback(e),a&&C(a)}},[]),e},X=e=>{var t=L(),a=m(),r=N(q[e]||y[a]||2e3);return t||r},Z=()=>{p&&(p=new MessageChannel)},ee=()=>p,et=()=>p?.port1,ea=e=>(o(()=>{e||Z()},[e]),ee()),er=()=>{var[e,t]=n("");return o(()=>{t(window.location.origin)},[]),e},en=()=>{var e=_(),t=d(),a=I(),r=m(),{page:n,params:o,path:i}=t,c=S(),u=t?.path?.match(/(?:g|geo)(\d+)/),l=("geoId"in o?o.geoId:void 0)||(u?Number(u[1]):void 0)||void 0,E="detailId"in o?o.detailId:void 0,v="originId"in o?o.originId:void 0,T=E||l||v||void 0,C=`https://${e}${t.path}`,g=!K(e),R=!!D();return s(()=>({pageUid:c,domainName:e,page:n,locationId:T,geoId:l,devicePlatform:r,locale:a,path:i,referringUrl:document.referrer,pageTitle:document.title,fullPageUrl:C,isProd:g,isLoggedIn:R}),[c,e,r,l,a,T,n,i,C,g,R])},eo=()=>{var e,[t,a]=n(""),r=e=>{var t="";e.forEach(e=>{"fulfilled"===e.status&&(t+=e.value)}),a(t)},i=(e=(e,t)=>new Promise((a,r)=>{var n=()=>{o()},o=R(e,()=>{a(`:${e.toLowerCase()}:`),t.removeEventListener("abort",n)},()=>{r(),t.removeEventListener("abort",n)});t.addEventListener("abort",n)}),s(t=>Promise.allSettled([e(g.TARGETING,t),e(g.PERFORMANCE,t),e(g.FUNCTIONAL,t)]),[]));return o(()=>{var e=!0,t=new AbortController;return i(t.signal).then(t=>{e&&r(t)}),()=>{e=!1,t.abort()}},[i]),t},es={__key:0xd3d4987463b7,id:"d3d4987463b78a39",loc:{},definitions:[]},ei=()=>{var e=P();return r.useCallback((t,a)=>{var r=a?{locationId:a,eventType:t,isGeoPage:!0}:{eventType:t,isGeoPage:!1};return e.query(es,r).toPromise().then(({data:e})=>{var t=e?.gtmData?.audienceIds?.map(e=>e)||void 0,a=e?.gtmData?.hashedPersistentCookie||void 0,r=e?.gtmData?.hashedPersistentCookieSegmentPOC||void 0,n=e?.gtmData?.hashedPersistentCookieSegmentMeta||void 0,o=e?.gtmData?.hashedPersistentCookieSHA1||void 0,s=e?.gtmData?.hashedPersistentCookieSHA256||void 0,i=e?.gtmData?.ipAddressCountry||void 0,c=e?.gtmData?.locationData?.regionName||void 0,u=e?.gtmData?.locationData?.regionId,_=e?.gtmData?.locationData?.countryName||void 0,l=e?.gtmData?.locationData?.countryId;return{audienceIds:t,hashedPersistentCookie:a,hashedPersistentCookieSegmentPOC:r,hashedPersistentCookieSegmentMeta:n,hashedPersistentCookieSHA1:o,hashedPersistentCookieSHA256:s,ipAddressCountry:i,regionName:c,regionId:u,countryName:_,countryId:l,locationHierarchy:e?.gtmData?.locationData?.locationHierarchy||void 0,stateId:e?.gtmData?.locationData?.stateId,stateName:e?.gtmData?.locationData?.stateName||void 0,cityName:e?.gtmData?.locationData?.cityName||void 0}})},[e])},ec=()=>{var e=ei(),t=eo(),a=en(),r=L(),n=i(!1),c=i([]),u=i(""),_=i([]),l=s(e=>{var t=a();return{event:e.event,data:{...t,...e.data,consent:u.current}}},[a]),E=s((e,t=!1)=>{if(Y(e.event)||t)et()?.postMessage(e);else{var a={...e,event:`${e.event}_HIGH_PRIORITY`};et()?.postMessage(a),n.current?et()?.postMessage(e):_.current.push(e)}},[]),d=s(t=>new Promise(a=>{var{locationId:r}=t.data;e(t.event,r).then(e=>{a({event:t.event,data:{...t.data,...e}})})}),[e]),S=s(e=>{var t=l(e);j(e.event)?d(t).then(e=>{E(t=e)}):E(t)},[l,d,E]),v=s(e=>{if(0===u.current.length){c.current.push(e);return}S(e)},[S]);return o(()=>{r&&(n.current=r,_.current.forEach(e=>E(e,!0)),_.current=[])},[r,E]),o(()=>{u.current=t,u.current.length>0&&(c.current.forEach(e=>v(e)),c.current=[])},[t,v]),v},eu=()=>{var e=ec();return s(t=>{e(t)},[e])},e_=(e,t)=>{var a=S(),r=b();o(()=>{e&&r({event:"GTM_KPI_EXPERIMENT",data:{page:t}})},[t,r,e,a])},el=e=>{var t=S(),a=M(),n=b(),o=r.useRef(a);r.useEffect(()=>{e&&n({event:"PAGEVIEW",data:{liveRampEnvelope:$(),startDate:o.current.hotels?.checkInDate.toLocaleDateString("en-US"),endDate:o.current.hotels?.checkOutDate.toLocaleDateString("en-US"),numberGuests:(o.current.hotels?.adults??0)+(o.current.hotels?.children??0),numberRooms:o.current.hotels?.rooms,isDefaultDates:o.current.hotels?.defaultDates}})},[n,t,e])},eE={__key:0x986742f2dd8b,id:"986742f2dd8b0ec8",loc:{},definitions:[]},ed=()=>{var e=P();return s((t,a,r)=>{var{event:n}=t,o=t.tagMetrics.map(e=>({id:e.id.toString(),name:e.name,status:e.status,executionTime:e.executionTime}));e.query(eE,{request:{page:a,event:n,pixelMetrics:o,consent:r}}).toPromise()},[e])},eS=["Hotel_Review","Hotels","SmartDeals","HotelHighlight","ShowUserReviews","HotelsNear","HotelsList","LastMinute","LocalMaps","HotelsFusion"],ev=e=>{var t=M(),a=S(),{page:n}=d(),o=b(),s=r.useRef(!0);r.useEffect(()=>{s.current=!0},[a]),r.useEffect(()=>{if(e&&eS.includes(n)){if(s.current){s.current=!1;return}Q(o,t.hotels?.checkInDate,t.hotels?.checkOutDate,(t.hotels?.adults??0)+(t.hotels?.children??0),t.hotels?.rooms,t.hotels?.defaultDates)}},[o,e,t.hotels,n]),r.useEffect(()=>{if(e&&n.includes("VacationRental")){if(s.current){s.current=!1;return}Q(o,t.vr.checkInDate||void 0,t.vr.checkOutDate||void 0,t.vr.adults+t.vr.children||void 0,void 0,void 0)}},[o,e,t.vr,n]),r.useEffect(()=>{if(e&&n.includes("Attraction")){if(s.current){s.current=!1;return}Q(o,t.attractions.fromDate||void 0,t.attractions.toDate||void 0,(t.attractions.adults??0)+(t.attractions.children??0)||void 0,void 0,void 0)}},[o,e,t.attractions,n])},em=()=>{var e=i(null),t=_(),r=em.getGtmConfig(t),n=W(r,U()),{page:o}=d(),S=h(g.TARGETING),v=em.useDeferGtm(o),m=c(()=>x(r,o),[r,o])&&v&&S&&!!n,T=ed(),C=s(e=>{r.monitoringEnabled&&T(e.data,o,S)},[T,o,r.monitoringEnabled,S]);e_(m,o);var I=ea(m),D=s(()=>{e.current&&e.current.contentWindow&&I&&(I.port1.onmessage=C,e.current.contentWindow.postMessage("initGTMMessagePort",r.scriptSrcHostDomain,[I.port2]))},[r.scriptSrcHostDomain,C,I]);return G(m),w(m),c(()=>m?a(l,{component:E.gtm,children:a(u,{src:n,title:"gtm",ref:e,style:{display:"none"},onLoad:D})}):null,[m,n,D])},eT=e=>{var t=b(),a=S(),n=r.useRef(null);r.useEffect(()=>{n.current===e||A(n.current,e)||(t(e),n.current=e)},[e,t,a])};return[()=>{f={...k,scriptSrcQueryParams:encodeURIComponent("&gtm_auth=bQdYCwDudXrwbnRzFG9SEg&gtm_preview=env-3&gtm_cookies_win=x")},O={...k},N=z,L=J,H=X,p="undefined"!=typeof MessageChannel?new MessageChannel:null,U=er,b=eu,G=el,w=ev,em.useDeferGtm=H,em.getGtmConfig=F,e({GoogleTagManager:em,useGTMCallback:b,useGTMPageview:eT})},[e=>a=e.jsx,e=>(r=e,n=e.useState,o=e.useEffect,s=e.useCallback,i=e.useRef,c=e.useMemo),e=>u=e.EmbeddedContent,e=>_=e.useDomainName,e=>(l=e.default,E=e.Component),e=>(d=e.useRoute,S=e.usePageviewUid),e=>v=e.default,e=>m=e.useViewportCategory,e=>(T=e.requestTTICallback,C=e.cancelTTICallback),e=>I=e.useLocale,e=>D=e.useUserId,e=>(g=e.CategoriesEnum,R=e.requestConsent,h=e.useConsent),e=>P=e.useClient,e=>M=e.useTravelInfo,e=>A=e.default]]},["21h32l","o4yt4q","dyfdn5","qlcuu5","6nmgrj","fgwvq1","9b9b10","ys6v1o","gbnboa","7thqz4","52far5","973cci","mqwhqn","etaac9","b5nukb"]]);
