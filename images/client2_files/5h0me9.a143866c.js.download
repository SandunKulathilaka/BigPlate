(this.$WP=this.$WP||[]).push(["5h0me9",(e,t)=>{var a,i,o,n,r,d,l,s,c,_,u,m,p,h,f,g,v,T,b,N,y,x={noteTitle:"stPco",noteContent:"ksZLO",button:"xTanC f F",alertContainer:"Pj PN Pw PA"},I={__key:0x6dcf8cd80bee,id:"6dcf8cd80bee847e",loc:{},definitions:[]},w={__key:0xd0f90722f41,id:"0d0f90722f418bf2",loc:{},definitions:[]};function A({variant:e,noteTitle:t,noteBody:A,noteId:E,tripId:C,onClose:k}){var[L,P]=n(t??""),[D,M]=n(A??""),[O,S]=n(""),[j,q]=n(""),[z,R]=n(null),F=r(null),V=v(C),W=T(C),{localize:Y}=h(),{getTripErrorMessage:$}=f(),[{fetching:B},Z]=g(I),[{fetching:G},H]=g(w),J=b(C),K=N(C),Q="EDIT"===e,U=Q?"Edit note":"Add a note",X=Q?"Apply":"Add to trip",ee=i(o,{children:[a(p,{display:"inline-block",variant:"supporting-03",children:"Title"})," ",a(p,{display:"inline-block",variant:"supporting-01",children:"(optional)"})]});d(()=>{Q||K({itemName:"AddNoteModal"})},[Q,K]),d(()=>{null!==z&&F.current?.scrollIntoView({behavior:"smooth",block:"end"})},[z]),d(()=>{V({itemName:"AddNoteModal"})},[V]);var et=l(async()=>{if(Q?(e=await H({noteId:E??0,title:L,body:D}),t=e?.data?.updateTripNote?.errors):(J({itemName:"SubmitNoteClick",customData:{note:D}}),e=await Z({tripId:C??0,title:L,body:D}),t=e?.data?.addNoteToTrip?.errors),t?.length){var e,t,a=t.find(e=>e?.field==="NOTE_TITLE");a&&S($("EDIT_TRIP",a));var i=t.find(e=>e?.field==="NOTE_BODY");i&&q($("EDIT_TRIP",i))}if(O||j)throw new y("Validation error");if(e.error)throw Error(e.error.message)},[H,Z,Q,C,E,L,D,O,j,$,J]),ea=l(async()=>{if(D&&0!==D.trim().length)try{await et(),k(),W({itemName:"SuccessfulNoteAdd",customData:{note:D}})}catch(e){if(e instanceof y)return;R($("ADD_NOTE"))}else q("Note body cannot be empty!")},[k,$,et,D,W]);return a(_,{onClose:k,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",title:U,buttonsAlignment:"right",children:i("div",{"data-automation":"trip_add_or_edit_note_modal",children:[a("div",{className:x.noteTitle,children:a(u,{id:"new_trip_note_title",name:"title",label:ee,value:L,errorText:O,maxLength:100,placeholder:"(e.g., Transit in the city)",onChange:e=>{R(null),S(""),P(e.target.value)},"data-automation":"trip_add_or_edit_note_modal_title_input","data-testid":"trip_add_or_edit_note_modal_title_input"})}),a("div",{className:x.noteContent,children:a(m,{variant:"five-line",id:"trip_description",name:"description",label:"Your note",value:D,errorText:j,state:j?"error":void 0,maxLength:1e3,characterCountType:"max",placeholder:"(e.g., Need to decide if we should rent a car or take a train)",onChange:e=>{R(null),(e.target.value||0!==e.target.value.trim().length)&&j&&q(""),M(e.target.value)},"data-automation":"trip_add_or_edit_note_modal_body_input","data-testid":"trip_add_or_edit_note_modal_body_input"})}),a("div",{className:x.button,children:a(c,{"aria-label":Y.string("common_Loading"),loading:B||G,onClick:ea,dataAttributes:{"data-automation":"trip_add_or_edit_note_modal_save_button"},children:X})}),z?a("div",{className:x.alertContainer,ref:F,"data-automation":"trip_add_or_edit_note_modal_error_alert",children:a(s,{variant:"warning","aria-live":"assertive",children:z})}):null]})})}return e("AddOrEditNoteModal",A),[()=>{y=class extends Error{},e("AddOrEditNoteModal",A)},[e=>(a=e.jsx,i=e.jsxs,o=e.Fragment),e=>(n=e.useState,r=e.useRef,d=e.useEffect,l=e.useCallback),e=>s=e.InlineAlert,e=>c=e.default,e=>_=e.Modal,e=>(u=e.TextInput,m=e.TextArea),e=>p=e.default,e=>h=e.useLocalize,e=>f=e.useLocalizeTripError,e=>g=e.useTripMutation,e=>(v=e.useManagementImpressionLogger,T=e.useManagementInteractionLogger,b=e.useSavesInteractionLogger,N=e.useSavesImpressionLogger)]]},["21h32l","o4yt4q","lt9m20","jppfwt","i3sz5h","u3aiot","essqvy","7thqz4","mc5s4b","r6ayw2","sa2a6q"]]);
