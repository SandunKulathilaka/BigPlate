(this.$WP=this.$WP||[]).push(["otjnrb",(e,t)=>{var o,s,i,r,h,a,l,d,n,p,c,u,g,m,v={__key:0xdb8325c15b39,id:"db8325c15b39750e",loc:{},definitions:[]},P={wrapper:"tGLXF f Fk j",itemWrapper:"QNnUR H c R2 o"},f=({onAddFile:e,isDragOverOutsideComponent:t,ctaText:s})=>o(n,{addFile:e,allowedFileTypes:c,maxSizeInBytes:p,allowMultipleSelection:!1,isDragOverOutsideComponent:t,children:o("div",{className:"Fwwhu w _Z S4 b f e j",children:o("div",{children:s})})});function w(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var C=e=>{var{localize:t}=a();return o(u,{...e,localize:t})};return[()=>{f.defaultProps={isDragOverOutsideComponent:!1},g=f,u=class extends i{constructor(e){super(e),w(this,"allPhotos",[]),w(this,"fetchedCurrentPage",!1),w(this,"receivedPageWithZeroPhotos",!1),w(this,"newFileSelected",e=>{this.props.photoSelected(e,void 0)}),w(this,"photoClicked",e=>{this.props.photoSelected(void 0,e)}),w(this,"render",()=>{var e={width:"100%",height:"100%"};return s("div",{className:P.wrapper,children:[o("div",{className:P.itemWrapper,children:o(g,{onAddFile:this.newFileSelected,isDragOverOutsideComponent:this.props.isDragOverOutsideComponent,ctaText:this.props.localize.string("upload_profile_photo")})}),o(h,{query:v,variables:{userId:this.props.userId,offset:30*this.state.photoPage,limit:30},children:({fetching:t,data:s})=>(!t&&s&&s.photosForUsers&&(this.fetchedCurrentPage=!0,0===s.photosForUsers.length&&(this.receivedPageWithZeroPhotos=!0),s.photosForUsers.forEach(e=>{!this.allPhotos.some(t=>t.id===e?.id)&&e&&this.allPhotos.push(e)})),this.allPhotos.map(t=>o("div",{className:P.itemWrapper,onClick:()=>this.photoClicked(t),children:o(d,{sources:t.photoSizes,...e})},t.id)))}),o(l,{onChange:e=>{e&&this.fetchedCurrentPage&&!this.receivedPageWithZeroPhotos&&(this.fetchedCurrentPage=!1,this.setState({photoPage:this.state.photoPage+1}))},children:e=>o("div",{style:{width:1,height:1},ref:e})})]})}),this.state={photoPage:0}}},m=r(e=>({userId:e.auth.loggedInUserId}))(C),e({ImageDropzone:g,PhotoSelector:m})},[e=>(o=e.jsx,s=e.jsxs),e=>i=e.Component,e=>r=e.connect,e=>h=e.Query,e=>a=e.useLocalize,e=>l=e.default,e=>d=e.ResponsiveImage,e=>(n=e.DropZone,p=e.maxImageUploadSizeInBytes),e=>c=e.supportedImageTypes]]},["21h32l","o4yt4q","2mj4nv","mqwhqn","7thqz4","w0dpwq","76j3t0","714tj5","7l6raj"]]);
