(this.$WP=this.$WP||[]).push(["2wscmt",(e,a)=>{var r,t,i,d,n,s,l,o,c,u,p,_,m,T,h,v,C,b,k={nodeContainer:"_c",underline:"TuRMH"},w=({trip:e,messageType:a,openTripInNewTab:s=!1,onCtaClick:l,onVisible:o})=>{var c,u=T(o),h=t.useCallback(()=>{l?.();var a=e.route?.url;a&&(s?window.open(a):window.location.href=a)},[l,e,s]),v=r(m,{className:k.underline,onClick:h,"data-automation":"ViewTripToast.viewTrip",children:r(i,{id:"stat_modal_view_trip_v2"})});switch(a){case"CREATED":c=r(d,{id:"create_trip_success_toast_with_bold",args:{TripName:p(e?.title||"")}});break;case"SAVED":c=r(d,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:p(e?.title||"")}});break;default:c=null}return r("div",{ref:u,children:r(n,{cta:v,children:r(_,{element:"savedToast",trip:e,children:r("span",{className:k.nodeContainer,children:c})})})})},f={tripNameLink:"bCZgg"},y=({trip:e,onUndo:a})=>{var t=r(m,{onClick:a,children:r(i,{id:"stat_modal_undo"})});return r(n,{cta:t,children:r(_,{element:"unsaveToast",trip:e,children:r("span",{className:k.nodeContainer,children:r(d,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:p(e?.title),TripLink:e.route?.url||"",TripClass:f.tripNameLink}})})})})},g=({trip:e,hideCta:a,onVisible:s,onCtaClick:l})=>{var o=T(s),c=r(m,{"data-automation":"AutosavedToTripToast.change",onClick:t.useCallback(()=>{l()},[l]),children:r(i,{id:"stat_modal_change"})});return r("div",{ref:o,children:r(n,{cta:a?null:c,children:r(_,{element:"savedToast",trip:e,children:r("span",{"data-automation":"AutosavedToTripToast.savedTo",className:k.nodeContainer,children:r(d,{id:"stat_modal_saved_to_tripname_with_bold_new_tab",args:{TripName:p(e?.title),TripLink:e.route?.url||"",TripClass:f.tripNameLink}})})})})})},I=({onUndo:e})=>{var a=r(m,{onClick:e,children:r(i,{id:"stat_modal_undo"})});return r(n,{cta:a,children:r(i,{id:"stat_modal_removed_from_tripname",args:{sTripName:r(i,{id:"m1_trips_my_saves_header"})}})})},N=8e3,A=({saveToast:e}={})=>{var[a,d]=t.useContext(s),[,p]=l(o),_=t.useCallback((e,a)=>p({tripId:e,referenceId:`${a.id}`,referenceType:a.type,allowDuplicates:!1}).then(e=>{var a=e?.data?.addItemToTrip,r=e?.data?.addItemToTrip?.trip,t=e?.data?.addItemToTrip?.errors?.[0]?.error;return{trip:r,error:a?null:{query:"ADD_ITEM_TO_TRIP",tripsError:t||void 0}}}).catch(()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})),[p]),m=t.useCallback(({trip:t,messageType:i,onCtaClick:d,onVisible:n,openTripInNewTab:s})=>{var l=r(h,{openTripInNewTab:s??!1,trip:t,messageType:i,onCtaClick:d,onVisible:n});a({node:e??l})},[a,e]),T=t.useCallback((e,t,i)=>{a({node:r(v,{trip:e,onUndo:()=>{_(e.id,t).then(e=>{i&&i(e.trip,e.error)})}})})},[_,a]),k=t.useCallback((t,i,n,s,l=N)=>{var o=r(C,{trip:t,onCtaClick:()=>{i&&i(),d()},onVisible:n,hideCta:s});a({node:e??o,timeout:l})},[a,d,e]),w=t.useCallback(()=>{a({node:r(n,{children:r(i,{id:"m1_trips_save_success_stat_d2"})})})},[a]),[,f]=l(c),y=t.useCallback(e=>f({id:`${e.id}`,type:e.type}).then(e=>({isAdded:!!e?.data?.MySaves_addToMySavesSingle})).catch(()=>({isAdded:!1})),[f]),g=t.useCallback((e,t)=>{a({node:r(b,{onUndo:()=>{y(e).then(e=>{t(e.isAdded)})}})})},[a,y]),I=t.useCallback(e=>a({node:r(n,{children:e})}),[a]);return{launchViewTripToast:m,launchRemoveFromTripToast:T,launchAutoSavedToTripToast:k,launchAddItemToMySavesToast:w,launchRemoveItemFromMySavesToast:g,launchErrorTripToast:t.useCallback(e=>{a({node:r(n,{children:r(u,{query:e.query,error:e.tripsError})})})},[a]),launchToastMessage:I}};return[()=>{h=w,v=y,C=g,b=I,e("default",A)},[e=>r=e.jsx,e=>t=e,e=>(i=e.default,d=e.UnsafeLocalize),e=>(n=e.ToastItem,s=e.Toast),e=>l=e.useMutation,e=>(o=e.AddItemToTrip,c=e.AddItemToMySaves),e=>u=e.default,e=>p=e.escapeHtml,e=>_=e.TripsImpression,e=>m=e.default,e=>T=e.useOnVisible]]},["21h32l","o4yt4q","7thqz4","tr3542","mqwhqn","ag9b0s","mc5s4b","irfizf","665v5s","6g4avl","3btuy0"]]);
