(this.$WP=this.$WP||[]).push(["1b5l5d",(e,t)=>{var a,r,l,n,i,s,o,u,c,p,d,T,h,y,b,g,R,m,v,A,S,N,f,_,k,O,I,w,C,E,M,P,H,L={__key:98250257357688,id:"595babb05b78ba18",loc:{},definitions:[]},U={__key:83466418264976,id:"4be98a361b90aeac",loc:{},definitions:[]},D=(e,t,r=!1)=>{var{locationV2:l,defaultUrl:n,hotelsUrl:i,attractionOverviewURL:s,restaurantOverviewURL:o}=e??{},{locationId:u,placeType:c,isGeo:p,names:d,vacationRentalsRoute:T}=l??{};if(null==u||u<=1||null!=t&&!0!==p)return null;var h=i??s??o??T?.url??n;return null==h?null:{key:String(u),title:d?.name??"",subtitle:d?.longOnlyHierarchyTypeaheadV2,label:r?a(v,{id:"social_mobile_reason_for_sponsored"}):void 0,searchText:d?.name??"",url:h,trackingType:r?"SPONSORED_LOCATION":"LOCATION",trackingPlaceType:c,locationId:u??-1}},x={__key:0x83d9ecf20bc2,id:"83d9ecf20bc289b9",loc:{},definitions:[]},q=(e,t)=>{var{localize:a}=A(),i=d(),s=R(),o=r(!0);return l(()=>()=>{o.current=!1},[]),n(()=>{navigator.geolocation.getCurrentPosition(({coords:{latitude:a,longitude:r}})=>{S.set("rejectedLocationPermissions",!1);var l=(()=>{switch(e){case"ATTRACTIONS":return{page:"NearbyAttractions",params:{latitude:a,longitude:r}};case"HOTELS":return{page:"NearbyHotels",params:{latitude:a,longitude:r}};case"RESTAURANTS":return{page:"NearbyRestaurants",params:{latitude:a,longitude:r}};case"VACATION_RENTALS":return{page:"NearbyVacationRentals",params:{latitude:a,longitude:r}};default:return{page:"Nearby",params:{isNearby:!0,latitude:a,longitude:r}}}})();s.query(x,l).toPromise().then(({data:e})=>{t();var a=e?.routes?.[0]?.url;null!=a&&i(a)},()=>{t()})},e=>{o.current&&t(),(e.code===e.PERMISSION_DENIED||e.code===e.TIMEOUT||e.code===e.POSITION_UNAVAILABLE)&&(S.set("rejectedLocationPermissions",!0),alert(a.string("mw_js_positionPermissionDenied")))},{timeout:6e3})},[a,i,s,e,t])},j=({scope:e,onStopLoading:t})=>{var{localize:a}=A(),r="number"==typeof e.latitude&&"number"==typeof e.longitude,l=q(e.linkType,t);return r?null:{title:a.string("mx_nearby"),searchText:a.string("mx_nearby"),icon:N,trackingType:"NEARBY",key:"NEARBY",onClick:l}},V=(e,t)=>{var{title:a,authors:r}=e;return{title:a,subtitle:r,searchText:a,icon:f,trackingType:t?"SPONSORED_ARTICLE":"ARTICLE"}},z=(e,t)=>{var{name:a,stateAndCountryOrEquivalent:r}=e;return{title:a,subtitle:r,searchText:a,trackingType:t?"SPONSORED_LOCATION":"LOCATION"}},B=(e,t)=>{var{title:a,ownerDisplayName:r}=e;return{title:a,subtitle:r,searchText:a,icon:_,trackingType:t?"SPONSORED_TRIP":"TRIP"}},F=e=>{var t,r=k(),l=I(),{page:n}=h(),i=y(),{randomSponsorshipCampaign:s}=O(e),o=w(()=>{s&&l({team:"TAPS",page:n,pageUid:i,itemType:"sponsoredSearchImpression",itemId:String(s.campaignId),itemName:s.sponsorDisplayName,customData:JSON.stringify({campaignType:s.campaignType,clickUrl:s.clickUrl,sponsorId:s.sponsorId})})});if(!s)return null;var{campaignId:u,sponsorId:c,sponsorDisplayName:p,clickUrl:d,campaignType:T}=s,b=124!==s.sponsorId,g={key:String(u),label:b?a(v,{id:"sponsored_search_sponsored_label"}):void 0,url:d,onClick:()=>{r({team:"TAPS",actionType:"click",page:n,pageUid:i,itemType:"sponsoredSearchClick",itemId:String(u),itemName:p,customData:JSON.stringify({campaignType:T,clickUrl:d,sponsorId:c})})}};switch(T){case"ARTICLE":t=V(s,b);break;case"GEO":t=z(s,b);break;case"TRIP":t=B(s,b);break;default:return null}return{...g,...t,title:a("div",{ref:o,children:t.title})}},K=({isOpen:e,scope:t,onStopLoading:r})=>{var l=y(),n={isHotelsUrl:"HOTELS"===t.linkType,isAttractionsUrl:"ATTRACTIONS"===t.linkType,isRestaurantsUrl:"RESTAURANTS"===t.linkType,isRentalsUrl:"VACATION_RENTALS"===t.linkType},[{data:s}]=m({query:L,variables:n,pause:!e}),[{data:o}]=m({query:U,variables:{recentLocationsLimit:"ATTRACTION"===t.pageType||"HOTEL"===t.pageType||"RESTAURANT"===t.pageType?10:5,uid:l,...n},pause:!e}),u=E({scope:t,onStopLoading:r}),c=M(!e),p=i(()=>(s?.popularDestinations.map(e=>C(e,t.linkType))||[]).filter(Boolean).slice(0,5),[s,t.linkType]),d=i(()=>(o?.insightProfile?.locations?.map(e=>C(e?.location,t.linkType))||[]).filter(Boolean).slice(0,5),[o,t.linkType]);return i(()=>{var e,t,r=[];return null!=u&&r.push(u),null!=c&&r.push(c),d.length>0?(e=a(v,{id:"dual_search_recently_viewed_all_caps"}),t=r.length,r.push(...d)):p.length>0&&(e=a(v,{id:"dual_search_popular_destinations"}),t=r.length,r.push(...p)),{results:r,header:e,headerIndex:t}},[u,c,p,d])},G=({source:e,scope:t,maxItems:a,onClose:i,isOpen:o,onOpen:u,query:c,setQuery:p,searchMode:y="SingleSearch",highlightFirstResult:R=!1,shouldNavigateForResult:m=()=>!0,onResultSelected:v,loadingTimeLimit:A,showRecentResults:S=!1,scopeSRPToLinkType:N=!1,runQueryOnConfigChange:f=!1})=>{var _=h(),k=d(),[O,I]=s(0),[w,C]=s(!1),{results:{results:E,resultsId:M},logTypeaheadOpened:H,logResultSelection:L,logSearchAction:U,searchSessionId:D}=b({query:c,source:e,scope:t,searchMode:y,maxItems:a,showRecentResults:S,scopeSRPToLinkType:N,runQueryOnConfigChange:f,showArticles:!0}),x=n(()=>{C(!1)},[]),q=P({scope:t,isOpen:o,onStopLoading:x}),j=0===E.length||!c.length||c.length<g,V=j?q.results:E,z=r("");l(()=>{M!==z.current&&(I(Date.now()),z.current=M)},[M]);var[B,F]=s(null),K=R&&null==B?0:B,G=null!=B&&V[B]?.searchText||c,Y=n((e,t)=>{L(t,j,e,V.findIndex(t=>t.key===e.key),O)},[V,L,O,j]),$=n(e=>{if(null!=e){if(0!==e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;if(_.path===e.currentTarget.pathname&&T.get(_.page)?.isClientNavigable({sourcePage:_.page})){null!=i&&i();return}}C(!0)},[_,i]),J=n(e=>{(!o||e)&&(u&&u(),F(null),H(),I(Date.now()))},[u,o,H]),Q=n(()=>{o&&(F(null),i&&i())},[o,i]),W=n(e=>{p(e),F(null),e.length>=g&&J()},[p,J]),X=n(t=>{switch(t.keyCode){case 38:o?F(e=>null==e?V.length-1:e>0?e-1:null):J(),t.preventDefault();break;case 40:o?F(e=>null==e?0:e<V.length-1?e+1:null):J(),t.preventDefault();break;case 13:var a=null!=K?V[K]:null;null==a&&"SRP_SINGLE_SEARCH"===e?(Q(),t.preventDefault()):null!=a&&(Y(a,"enter"),!1===t.defaultPrevented&&(a.onClick?.(),v?.(a),F(null),m?.(a)&&null!=a.url&&k(a.url)&&C(!0),t.preventDefault()));break;case 27:Q(),t.preventDefault()}},[k,o,K,V,Q,J,Y,e,m,v]),Z=n(()=>{U(O),C(!0)},[U,O]),ee=n(()=>{F(null)},[]);l(()=>{var e=null;return w&&A&&(e=setTimeout(x,A)),()=>{e&&clearTimeout(e)}},[w,x,A]);var et=n((e,t,a)=>{var r=null==a||a.doTracking,l=null==a||a.startLoading;r&&Y(e,"click"),l&&$(t),v?.(e)},[Y,$,v]);return{displayedQuery:G,isLoading:w,results:V,header:j?q.header:void 0,headerIndex:j?q.headerIndex:void 0,selectedIndex:K,searchSessionId:D,onResultHovered:ee,onResultClicked:et,onOpen:J,onClose:Q,onSubmit:Z,onChange:W,onKeyDown:X}},Y={HOTEL:["Hotels","MobileHotels","Hotel_Review","MobileHotel_Review","HotelHighlight","MobileHotelHighlight","SmartDeals","MobileSmartDeals","HotelsList","MobileHotelsList","HotelsNear","MobileHotelsNear","NearbyHotels","MobileNearbyHotels","HotelSearch","LastMinute","TravelersChoiceHotels","ShowUserReviewsHotels"],ATTRACTION:["Attractions","MobileAttractions","Attractions_Coverpage","Attraction_Review","MobileAttraction_Review","AttractionsNear","AttractionProductReview","MobileAttractionProductReview","MobileAttractionsNear","Attraction_Products","MobileAttraction_Products","AttractionReviewSearch","MobileAttractionReviewSearch","NearbyAttractions","MobileNearbyAttractions","ShowUserReviewsAttractions","TravelersChoiceAttractions"],RESTAURANT:["Restaurants","MobileRestaurants","Restaurant_Review","MobileRestaurant_Review","RestaurantSearch","MobileRestaurantSearch","RestaurantsNear","MobileRestaurantsNear","RestaurantMenu","MobileRestaurantMenu","NearbyRestaurants","MobileNearbyRestaurants","TravelersChoiceRestaurants","ShowUserReviewsRestaurants"],FORUM:["ShowTopic","ShowForum","ListForums","ForumHome"]},$={},J=({source:e,maxItems:t=10,placeholderText:i,initialQuery:o="",hidden:d,onClose:T,scope:h,searchMode:y="SingleSearch",isModalOnly:b=!1,size:g="small",showBorder:R=!0,boxShadow:m="none",inputTypography:v="input-01",absoluteOverlayStyles:A,highlightFirstResult:S,showRecentResults:N=!1,updateTypeAheadResults:f})=>{var[_,k]=s(b),O=n(()=>{b||k(!1),T&&T()},[T,b]),I=n(()=>{b||k(!0)},[b]),[w,C]=s(o),E=H({source:e,maxItems:t,scope:h,searchMode:y,onOpen:I,onClose:O,isOpen:_,query:w,setQuery:C,highlightFirstResult:S,showRecentResults:N}),M=E.results&&f?E.results.map(f):E.results,{onOpen:P}=E,L=r(!1);return(l(()=>{b&&null!=P&&!L.current&&P(!0),L.current=_},[b,P,_]),d&&!_)?null:a(u,{component:c.typeahead,children:a(p,{...E,results:M,onResultClicked:(e,t)=>{E.onResultClicked?.(e,t)},placeholderText:i,query:w,scope:h,isOpen:_,testAttribute:`typeahead-${e}`,size:g,showBorder:R,boxShadow:m,typographyVariant:v,absoluteOverlayStyles:A})})};return[()=>{C=D,E=j,M=F,P=K,H=G,Object.entries(Y).forEach(([e,t])=>t.forEach(t=>{$[t]=e})),e({default:o(J),pageToTypeMappings:$,useTypeaheadState:H})},[e=>a=e.jsx,e=>(r=e.useRef,l=e.useEffect,n=e.useCallback,i=e.useMemo,s=e.useState,o=e.memo),e=>(u=e.default,c=e.Component),e=>p=e.TypeaheadUI,e=>d=e.useNavigate,e=>T=e.pages,e=>(h=e.useRoute,y=e.usePageviewUid),e=>(b=e.default,g=e.MIN_QUERY_LENGTH),e=>(R=e.useClient,m=e.useQuery),e=>(v=e.default,A=e.useLocalize),e=>S=e.default,e=>N=e.default,e=>f=e.default,e=>_=e.default,e=>k=e.default,e=>O=e.useRandomSponsorshipCampaign,e=>I=e.default,e=>w=e.useOnVisible]]},["21h32l","o4yt4q","6nmgrj","hwdnu5","0ad67e","u5g3tb","fgwvq1","7l5hpv","mqwhqn","7thqz4","tp1g68","nc3gmf","zb2uaz","l75rcq","r73jw8","ubyuk3","xg719z","3btuy0"]]);
