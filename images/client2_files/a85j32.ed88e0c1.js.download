(this.$WP=this.$WP||[]).push(["a85j32",(e,t)=>{var a,i,r,n,l,o,d,s,c,p,u,m,v,h,g,_,f,b,y,T,I,w,k,C,N,P,S,D,x,M,B,E,A,O,L,R,j,z,V,G,q,F,H,W,U,Z,Y,$,J,X,Q,K,ee,et,ea,ei,er,en,el,eo,ed,es,ec,ep,eu,em,ev,eh,eg,e_,ef,eb,ey,eT,eI,ew,ek,eC,eN,eP,eS,eD,ex,eM,eB,eE,eA,eO,eL,eR,ej,ez,eV,eG,eq,eF,eH,eW,eU,eZ,eY,e$,eJ,eX,eQ,eK,e0,e1,e2,e3,e4,e8,e6,e9,e5,e7,te,tt,ta,ti,tr,tn,tl,to,td,ts,tc,tp,tu,tm,tv,th,tg,t_,tf,tb,ty,tT,tI,tw,tk,tC,tN,tP,tS,tD,tx,tM,tB,tE=({children:e})=>{var[t,i]=l(!1),r=o(()=>({isStickyHeaderOpen:t,setIsStickyHeaderOpen:i}),[t,i]);return a(e9.Provider,{value:r,children:e})},tA=()=>{var e=d(e9);if(null==e)throw Error("useStickyHeaderContext used when not inside of a StickHeaderContextProvider");return e},tO=({children:e,scrollContainerRef:t,sectionRefMapping:i})=>{var[r,n]=l(0),d=c(i),s=c(new Map);p(()=>{d.current=i},[i]);var m=u((e,t)=>{var a="string"==typeof e?d.current.get(e):e;if(null==a||null==t)return()=>{};var i=s.current.get(a)||[];return i.push(t),s.current.set(a,i),function(){s.current.set(a,i.filter(e=>e!==t))}},[]),v=u(e=>{var a="string"==typeof e?d.current.get(e):e;if(a?.current){var i=s.current.get(a);i?.length?i.forEach(e=>e(n,a,r)):n(r)}function n(e){if(a?.current){var{y:i}=a.current.getBoundingClientRect();t?.current?.scrollBy({top:i-e,behavior:"smooth"})}}},[r,t]),h=o(()=>({sectionRefMapping:i,scrollOffset:r,setScrollOffset:n,scrollToSection:v,registerHandler:m,scrollContainerRef:t}),[i,r,n,v,m,t]);return a(e7.Provider,{value:h,children:a(e5,{children:e})})},tL=()=>{var e=d(e7);if(null==e)throw Error("useSectionScrollContext used when not inside of a SectionScrollProvider");return e},tR=(e,t)=>{var{registerHandler:a}=tL(),i=c(void 0);p(()=>{i.current=t});var r=u((e,t,a)=>{i.current?.(e,t,a)},[]);p(()=>a(e,r),[a,r,e])};function tj({onScroll:e,throttle:t,useDebounce:a,useCapture:i,scrollContainerRef:r}){var l=t||200,o=n.useMemo(()=>R(e,l,{trailing:!a}),[e,l,a]);return n.useEffect(()=>{var e=r?.current;if(null!=e&&null!=o)return e.addEventListener("scroll",o,i),()=>{e.removeEventListener("scroll",o,i)}},[r,o,i]),null}var tz={sticky:"aGWPa _U l",stickyHeader:"SRyWz t",visible:"APidY",row:"nhHCc f u k",tabWrapper:"hJsNx _u w",saveOrViewTripCtaWrapper:"jZhZO I"},tV=({anchorRef:e,tabBar:t,tabSectionRefs:r,onVisible:l,onActiveTabChange:o,saveOrViewTripCta:d})=>{var s=S(),c=A(),[p,u]=n.useState(0),[m,v]=n.useState(!1),[h,g]=n.useState(0),_=n.createRef(),{scrollToSection:f,setScrollOffset:b,scrollContainerRef:y}=tL(),{setIsStickyHeaderOpen:I}=tA(),w=n.useCallback(()=>{if(e.current){var{offsetTop:t}=e.current,{top:a}=e.current.getBoundingClientRect(),i=a<t;v(i),I(i)}},[e,I]),k=n.useCallback(()=>{var e=_.current?.getBoundingClientRect()?.top??0,t=(_.current?_.current.offsetHeight+10:10)+e;g(t),b(t)},[_,b,g]),C=n.useCallback(()=>{var e=h+1,t=Number.MAX_SAFE_INTEGER,a=0;r.forEach((i,r)=>{if(i.current){var n=Math.abs(i.current.getBoundingClientRect().y-e);n<t&&(a=r,t=n)}}),a!==p&&o(a),u(a)},[r,h,p,o]),N=n.useCallback(()=>{w(),k(),C()},[C,k,w]);return(n.useEffect(()=>{w(),k()},[k,w]),n.useEffect(()=>{m&&l?.()},[m,l]),c)?null:a("div",{ref:_,className:O(tz.sticky,tz.stickyHeader,m&&tz.visible),children:i(T,{fullBleed:!0,children:[a(L,{callback:N,throttle:300}),a(tj,{scrollContainerRef:y,onScroll:N,throttle:300}),i("div",{className:tz.row,children:[a("div",{className:tz.tabWrapper,children:t(f,p)}),a("div",{className:tz.saveOrViewTripCtaWrapper,children:"MOBILE"!==s&&d("sticky-header")})]})]})})},tG={"title-02":28,"title-03":24,"title-04":18,"body-01":16},tq=({width:e,variant:t="body-01"})=>a("div",{style:{width:e,height:tG[t]},className:eB("NvuUX o",{BfjIN:"title-02"===t,zhRLt:"title-03"===t,loyuq:"title-04"===t,gfvTs:"body-01"===t}),children:a(q,{})}),tF=["95%","97%","92%","98%","96%"],tH=({lines:e=5,...t})=>{var[i]=eE(t);return a("div",{className:eA(i),children:[...Array(e).keys()].map(e=>a("div",{className:"tyqkd",children:a(ta,{width:tF[e%tF.length]})},e))})},tW=()=>a("div",{className:"w _Z Re o",children:a(q,{})}),tU=()=>i("div",{children:[a(q,{}),a("div",{className:"_Q t l w",children:a(F,{})})]}),tZ=({variant:e="ThumbsUp",tripId:t})=>{var i=I();return a("div",{ref:eI(u(()=>{i("TripDetailsFeedbackSucessfulSubmit",{tripId:t.toString()})},[i,t])),children:a(Z,{icon:"ThumbsUp"===e?ew:ek,children:a(U,{variant:"body-01",color:"onDarkText",children:"ThumbsUp"===e?"Thanks for your feedback!":"Thanks. Your feedback is valuable as we continue to enhance our recommendations."})})})},tY=({onSubmit:e})=>{var t="MOBILE"===S(),[n,o]=l(""),[d,s]=l(tl),[c,p]=l(!1),[m,v]=l(""),h=u((e,t)=>{p(t)},[]),g=u((e,t)=>{s(a=>a.map(a=>a.value===e?{...a,isChecked:t}:a))},[]),_=u(e=>{o(e.target.value)},[]),f=()=>{var t=n.trim();c&&!t?v("Please specify the issue you experienced"):(v(""),e([...d,{value:t,label:"Other",isChecked:!!t}]))};return i(r,{children:[i("section",{className:"Ma Nn MJ NP",children:[a(U,{variant:"body-01",children:"Sorry to hear that."}),a(U,{variant:"title-03",marginTop:"spacing-02",children:"What was wrong with this recommendation?"}),d.map(e=>a(eS,{checked:!!e.isChecked,value:e.value,label:e.label,onToggle:g},e.value)),a(eS,{checked:c,value:"4",label:"Other (please specify below)",onToggle:h}),a(eP,{maxLength:160,errorText:m,value:n,marginTop:"spacing-03",placeholder:"Add your comments",onChange:_})]}),i("section",{className:"VMdEM f k Pk P- Px PM _Q s w z Gi",children:[a(x,{onClick:f,children:"Skip"}),a(D,{variant:"primary",size:"medium",onClick:f,fullWidth:t,marginBottom:t?"spacing-03":void 0,children:"Submit"})]})]})},t$={headerContainer:"YhlKk f Pj PX Pw PJ B1 Z BB",imageContainer:"Xxueo o",descriptionContainer:"f e k Mi Nb MH NM"},tJ=({item:e})=>i("div",{className:t$.headerContainer,children:[e.thumbnail?.photoSizes&&a("div",{className:t$.imageContainer,children:a(et,{source:e.thumbnail?.photoSizes,aspectRatio:"1:1"})}),i("div",{className:t$.descriptionContainer,children:[i("div",{children:[e.name&&a(U,{lineClamp:2,variant:"supporting-03",marginBottom:"spacing-02",children:e.name}),e.reviewSummary?.rating&&e.reviewSummary?.count&&a(eD,{size:"small",rating:e.reviewSummary?.rating,numReviews:e.reviewSummary?.count})]}),e?.placeType&&a(en,{item:e,variant:"minimal"})]})]}),tX=({item:e,isOpen:t,onSubmit:r})=>{var{open:n,close:l}=eC(()=>a(eN,{hideCloseButton:!0,overrideContentStyling:!0,children:a("div",{className:"JUjxe f e",children:i("div",{className:"yLpyj",children:[a("section",{className:"Ma Nn MK NP",children:a(tJ,{item:e})}),a(tY,{onSubmit:r})]})})}));return p(()=>{t?n():l()},[t,n,l]),null},tQ=({isThumbsUp:e,isThumbsDown:t,onThumbsUp:r,onThumbsDown:n,feedbackSent:l,...o})=>{var{localize:d}=f();return i("div",{className:eB("w f k v u Pi PN Pv PA",eA(o)),"data-automation":"trips_gai_preview_trip_day_item_feedback",children:[a(U,{variant:"supporting-01",children:a(_,{id:"trips_gai_feedback_useful_recommendation"})}),i("section",{className:"f v u",children:[a(M,{variant:"clear","aria-label":d.string("trips_gai_feedback_thumbs_up"),onClick:r,icon:e?ew:ex,disabled:l&&!e,dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_feedback_thumbs_up"}}),a(M,{variant:"clear","aria-label":d.string("trips_gai_feedback_thumbs_down"),onClick:n,icon:t?ek:eM,marginLeft:"spacing-03",disabled:l&&!t,dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_feedback_thumbs_down"}})]})]})},tK=e=>e.reduce((e,t)=>t.isChecked?to.includes(t.value)||"string"!=typeof t.label?{...e,[t.value]:"selected"}:{...e,[t.label]:t.value}:e,{}),t0=({item:e,tripId:t,onSaveFeedback:n,...o})=>{var d=w(),[s,c]=l(!1),[p,m]=l(!1),[v,h]=l(!1),[g,_]=l(!1),[f]=eT(),b=u((a,i,r)=>{var l=r?tK(r):void 0;n?.(e.locationId?.toString()||"",i,l),d(a,{itemId:e.locationId?.toString()||"",tripId:t.toString(),...i?{helpful:i}:{},...l})},[d,t,n,e]),y=u(()=>{s||(m(!0),c(!0),b("TripDetailsFeedbackForm","YES"),f(a(tZ,{tripId:t})))},[s,f,b,t]),T=u(()=>{s||(h(!0),_(!0),c(!0),b("TripDetailsFeedbackForm","NO"))},[s,b]),I=u(e=>{_(!1),b("TripDetailsExperienceIssues","NO",e),f(a(tZ,{variant:"ThumbsDown",tripId:t}))},[f,b,t]);return i(r,{children:[a(tQ,{isThumbsUp:p,isThumbsDown:v,onThumbsUp:y,onThumbsDown:T,feedbackSent:s,...o}),a(tX,{item:e,onSubmit:I,isOpen:g})]})},t1=({...e})=>a(ey,{children:a(t0,{...e})}),t2=({name:e,link:t,pricingInfo:r,tripId:n,itemId:l,bookableExperienceId:o})=>{var d=b(),s=w(),c=u(()=>{s("TripDetailsCTAClick",{tripId:n,itemId:l,bookableExperienceId:o})},[s,n,l,o]);if(!r?.fromPrice||!e)return null;var p=a(eb,{price:a(U,{variant:"supporting-03",display:"inline",children:d.formatCurrency(r.fromPrice)}),isPerGroupPricing:"UNIT"===r.pricingType,isTieredPricing:r.isTieredPricing||void 0,maxTravelersPerUnit:r.maxTravelersPerUnit||void 0});return i("div",{className:"QrFps f Q3 u Pj PX Pw PJ",children:[a(ef,{size:24}),i("div",{className:"f Fh w k u",children:[a(U,{variant:"supporting-01",lineClamp:2,children:e}),a("div",{className:"F0",children:a(U,{variant:"supporting-01",children:t?a(ea,{onClick:c,theme:"standalone",href:t,activated:!0,target:"_blank",children:p}):p})})]})]})},t3=({link:e,tripId:t,itemId:r,bookableExperienceId:n,pricingInfo:l})=>{var o=b(),d=w(),s=u(()=>{d("TripDetailsSeeOptions",{tripId:t,itemId:r,bookableExperienceId:n})},[d,t,r,n]);if(!l?.fromPrice)return null;var c=a(eb,{price:a(U,{variant:"supporting-03",display:"inline-block",children:o.formatCurrency(l.fromPrice)}),isPerGroupPricing:"UNIT"===l.pricingType});return i("div",{className:"f Q3 u k Mj",children:[a(U,{variant:"supporting-01",children:c}),e&&a(D,{variant:"secondary-commerce",size:"small",href:e,target:"_blank",onClick:s,children:"See options "})]})},t4=({item:e,tripId:t})=>{if(e?.object?.recommendedProduct){var i=e.object.recommendedProduct;return a(t2,{name:i.title?.text||null,pricingInfo:i.pricingInfo,link:i.route?.url,bookableExperienceId:e.object.recommendedProduct.activityId,tripId:t,itemId:e.id})}var r=e?.object?.object;if(em(r)){var n=r.object;if(n?.placeType==="ACTIVITY"&&n?.locationV2?.details?.__typename==="LocationSelection_AttractionProductDetails"&&n?.locationV2.details.productDetails?.pricingInfo)return a(t3,{tripId:t,itemId:e?.id,bookableExperienceId:r.locationId,name:n.name,pricingInfo:n.locationV2.details.productDetails.pricingInfo,link:n.route?.url})}return null},t8=({cardLink:e,tripId:t,title:r,description:n,award:o,photos:d,reviewSummary:s,tripItem:c,onSaveFeedbackItem:p,onClick:u,onIndividualSaveComplete:m})=>{var v=eh(),h="MOBILE"===S(),g=em(c.object?.object)&&c.object?.object?.object||null,[_,f]=l(0),b=(e,a)=>{v({itemName:"SuccessfulItemSave",itemType:"ViewGAI",customData:{itemId:c.id,gaiTripId:t,destinationTripId:a,saveCreationMethod:"GAI",isNew:"CREATED"===e}})},y=el({reviewSummary:s}),T=o?.year?a(ei,{size:"large",color:"BOTB"===o.awardType?"yellow":"green",year:o.year}):void 0,I=ep(c.object?.object),w=a(ec,{id:I?.id??0,type:I?.type,onSaveComplete:m,viewTripOpensNewTab:!0,onViewTripToastVisible:b,onAutosavedToTripToastVisible:b,sourceTripId:t,tripItemId:c.id??0}),k=d?a(X,{award:T,action:w,roundedCorners:!0,children:a(ea,{theme:"image",href:e,target:"_blank",onClick:u,"data-automation":"trips_gai_preview_trip_day_item_image",children:a(er,{itemRenderer:e=>a(et,{source:d?.[e],width:"100%",height:"100%"}),totalCount:d.length,currentIndex:_,onNav:e=>f(e),arrowSize:"small"})})}):void 0;return i(Q,{header:a(eo,{onClick:u,title:r,reviewData:y,itemLink:e,content:g?.placeType&&a(en,{item:g,variant:"extended"})}),media:k,secondary:a(ts,{tripId:t,item:c}),variant:"vertical",mediaLayout:{type:"FlexMediaVerticalHeight",height:h?150:200},children:[a(K,{children:a(ee,{children:n})}),g&&a(td,{item:g,tripId:t,onSaveFeedback:p})]})},t6={__key:0xd08cf1b9c92e,id:"d08cf1b9c92eb825",loc:{},definitions:[]},t9=e=>{if(!e)return null;var{locationItem:t}=e;return t?.object?.placeType==="ACTIVITY"&&t?.object?.locationV2?.details?.__typename==="LocationSelection_AttractionProductDetails"&&t?.object?.locationV2.details.productDetails?.pricingInfo?t?.locationId:e?.tripItem?.object?.recommendedProduct?e?.tripItem?.object?.recommendedProduct?.activityId:null},t5=(e,t)=>{var a=96/(e.length||1);return Math.min(100,Math.round(e.reduce((e,t)=>0===t.items.length?e+(t.description?1:0):e+a*((t.items.filter(e=>null!=e.gaiNarration).length+(t.description?1:0))/(t.items.length+1)),0)+(t?4:0)))},t7=e=>{var t=e?.object?.object;if(!em(t))return null;var a=t?.object;return t&&a?.locationId&&e.id?{id:e.id,latitude:a.latitude,longitude:a.longitude,placeType:a.placeType,name:a.name||null,gaiNarration:e?.object?.narrativeDescription?.plainText||null,reviewSummary:a.reviewSummary,photos:eu(a),url:a.route?.url||null,award:a.locationV2?.bestAwardForActiveYearV2?.year?{year:a.locationV2?.bestAwardForActiveYearV2.year,awardType:a.locationV2?.bestAwardForActiveYearV2.awardType??void 0}:void 0,tripItem:e,locationItem:t}:null},ae=e=>{var t=e.generatedTripRequest?.locationIds?.[0],a=t?e.tripLocations?.find(e=>e?.location?.locationId===t):null;return a?a?.location:e.tripLocations?.[0]?.location},at=(e,t)=>{var{title:a,description:i,items:r,structure:n,generatedTripRequest:l}=e,{locationId:o,latitude:d,longitude:s,name:c}=ae(e)??{},p=new Map;r?.forEach(e=>{e?.id&&p.set(e.id,e)});var u=n?.buckets?.filter(Boolean).map((e,a)=>{var i=t.string("triplist_itineraryday_ffffe73c",{0:a+1}),r=e.narrativeDescription?.plainText,n=e.narrativeDescription,l=[];return(e.items?.filter(Boolean).map(e=>p.get(e)).filter(Boolean)??[]).forEach(e=>{var t=t7(e);t&&l.push(t)}),{id:e.id,title:i,description:r,formattedDescription:n,items:l}})??[];return{title:a,description:i,days:u,centerPoint:null!=d&&null!=s?{latitude:d,longitude:s}:null,geoId:o??null,geoName:c??"",includeChildren:l?.includeChildren??!1,travelingWith:l?.travelingWith,tripDate:l?.tripDate,progress:t5(u,null!=i)}},aa=(e,t,a)=>{var i=y(),{localize:r}=f(),[n,o]=l(!0),d=c(null),s=c(null),[{fetching:u,error:m,data:v},h]=eO({query:t6,variables:{tripIds:[e??0],currency:i},pause:!e}),g=v?.Trips_getTrips?.[0]??null;return p(()=>{!u&&t&&d.current!==t&&(d.current&&(o(!0),s.current=g,h({requestPolicy:"network-only"})),d.current=t)},[h,u,g,t]),p(()=>{n&&"LOADING"!==a&&s.current!==g&&o(!1)},[n,a,g]),{fetching:u||n,error:m,trip:g?at(g,r):null}},ai="placesToStay",ar=e=>`tab:${e}`,an=(e,t)=>`item:${e}-${t}`,al={container:"ryxip",sidebar:"JXcQL",bar:"fCjSP",card:"ImYPs",marker:"ZrEaT Gy u j Pb PO Po PB",titleMarker:"tGROH"},ao=({tripId:e,dayId:t,item:n,step:o,locationId:d,initiallyExpanded:s=!1,isConnected:c=!0,loading:p,onSaveFeedbackItem:m,onIndividualSaveComplete:v})=>{var[h,g]=l(s),{sectionRefMapping:f,scrollOffset:b,scrollContainerRef:y}=tL(),T=w(),I=f.get(an(t,n.id)),k="MOBILE"===S(),{setSelectedItemId:C}=N(),P=u(()=>{k||C(n.id)},[C,n.id,k]),D=u(()=>{C(null)},[C]);tR(I,(e,t)=>{var a=t?.current?.offsetTop??0;g(!0),setTimeout(()=>{y?.current?.scrollTo({top:a-b,behavior:"smooth"})},0)});var x=u(()=>{T("TripDetailsItemClick",{tripId:e,itemId:n.id,location:n.locationItem?.object?.name,bookableExperienceId:t9(n)})},[n,T,e]),M=u(a=>{T(a?"TripDetailsCollapse":"TripDetailsExpand",{tripId:e,dayId:t,locationId:d}),g(e=>!e)},[T,e,t,d]);if(p&&null==n.gaiNarration)return a(tv,{step:o,isExpanded:h});var B=a(tc,{onClick:x,tripId:e,title:n.name,cardLink:n.url||void 0,photos:n.photos,award:n.award,reviewSummary:n.reviewSummary,onSaveFeedbackItem:m,description:n.gaiNarration&&i(r,{children:[a(U,{variant:"body-01",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_narration","data-automation-day-id":t},children:n.gaiNarration}),a(U,{variant:"body-01",color:"placeholderText",children:a(_,{id:"trips_cards_narration"})})]}),tripItem:n.tripItem,onIndividualSaveComplete:v});return a(tu,{ref:I,step:o,title:n.name,content:B,isOpen:h,isConnected:c,onExpandCollapseClick:M,onMouseEnter:P,onMouseLeave:D,dataAttributes:{card:{"data-automation":"trips_gai_preview_day_item","data-automation-day-item-id":n.id}}})},ad=({step:e=1,isExpanded:t=!1,isConnected:i=!1})=>{var r="MOBILE"===S();return a(tu,{step:e,title:a(ta,{variant:"title-04",width:250}),content:a(Q,{header:a(ta,{variant:"title-04",width:200}),media:a(tr,{}),variant:"vertical",mediaLayout:{type:"FlexMediaVerticalHeight",height:r?150:200},children:a(K,{children:a(ee,{children:a(ti,{})})})}),isOpen:t,isConnected:i})},as={openMapButton:"f u j w _Z",openMapOverlay:"VlNqW w _Z",closeMapButton:"BprOh",modal:"emGhX s _U Za Gg"},ac=({tripId:e,days:t,centerPoint:n,geoId:d,loading:s,hideMarkers:c})=>{var m="MOBILE"===S(),[h,g]=l(null),_=w(),{localize:b}=f(),{setSelectedItemId:y}=N(),{placesToStay:T,showPlacesToStay:I}=B();p(()=>{null!==h&&y(null)},[h,y]);var k=o(()=>[...c?[]:t.flatMap(e=>e.items).filter(e=>!s||null!=e.gaiNarration).map(({id:e,latitude:t,longitude:a,placeType:i,reviewSummary:r,name:n,photos:l,url:o,locationItem:d})=>e&&n&&t&&a&&i?{itemId:e,name:n,latitude:t,longitude:a,placeType:i,reviewSummary:r,thumbnail:l?.[0],url:o,locationItem:d}:null).filter(Boolean),...!c&&T&&I?T.map(e=>{var{locationId:t,latitude:a,longitude:i,placeType:r,reviewSummary:n,name:l,photos:o,route:d}=e;return t&&l&&a&&i&&r?{itemId:t,name:l,latitude:a,longitude:i,placeType:r,reviewSummary:n,thumbnail:o?.[0]?.photoSizes??[],url:d?.url,locationItem:{locationId:t,object:e}}:null}).filter(Boolean):[]],[t,c,s,T,I]),P=u(t=>{_(t.zoom>t.oldZoom?"TripDetailsZoomIn":"TripDetailsZoomOut",{tripId:e})},[_,e]),x=u(()=>{_("TripDetailsMapScroll",{tripId:e})},[_,e]),E=u(t=>{_("TripDetailsMapPinClick",{tripId:e,itemId:t})},[_,e]);return d&&n?h?a(z,{hideBackdrop:!0,className:as.modal,children:a(j,{children:a(v,{children:a(C,{locations:k,latitude:n.latitude,longitude:n.longitude,geoId:d,loading:s,onZoomChange:P,onPanStart:x,onPinClick:E,cardPositioning:"map-bottom",children:a("div",{className:as.closeMapButton,children:a(M,{icon:V,onClick:()=>g(!1),"aria-label":b.string("phoenix_accessibility_back_label")})})})})})}):a(C,{locations:k,latitude:n.latitude,longitude:n.longitude,geoId:d,loading:s,onZoomChange:P,onPanStart:x,onPinClick:E,hideLoadingIndicator:!0,children:m&&i(r,{children:[a("div",{className:as.openMapOverlay}),a("div",{className:as.openMapButton,children:i(D,{variant:"secondary",onClick:()=>g(!0),children:[a(G,{size:20}),"Map view"]})})]})}):s?a(tn,{}):null},ap=({formattedText:e,referenceHighlighter:t,fallbackText:i})=>{if(!e?.text)return i;var r=new Map(e.references?.filter(Boolean).filter(e=>e?.name!=null).map(e=>[`{{${e.name}}}`,e]));return(e.text.match(RegExp("\\{\\{(?<tag>[\\w-]+)\\}\\}","gu"))||[]).every(e=>r.has(e))?e.text.split(RegExp("(?<tag>\\{\\{[\\w-]+\\}\\})","u")).map((e,i)=>{var n=r.get(e);return a(h,{children:n?t(n):e},i)}):i},au={container:"XBzgG Y",content:"wltje _ Y",visible:"qKrBp"},am=({children:e,placeholder:t,ready:r})=>{var[n,o]=l(!1);return p(()=>{var e=setTimeout(()=>{o(!0)},50);return()=>clearTimeout(e)},[]),i("div",{className:O(au.container,n&&au.visible),children:[a("div",{className:O(au.content,r&&au.visible),children:r?e:null}),!r&&t]})},av={highlight:"Wb _S"},ah=({tripId:e,id:t,title:n,geoId:l,formattedDescription:o,fallbackDescription:d,items:s,expandFirstItem:c=!1,loading:p,onSaveFeedbackItem:u,onIndividualSaveComplete:m})=>{var{sectionRefMapping:v,scrollToSection:h}=tL(),g=w(),_=v.get(ar(t)),f=o||d?a(tg,{formattedText:o,fallbackText:d,referenceHighlighter:({value:i,itemId:r})=>{var n=r?v.get(an(t,r)):null;if(!n)return i;var l=()=>{g("TripDetailsTextJump",{tripId:e,itemId:r,text:i}),h(n)};return a("span",{role:"button",onClick:l,onKeyDown:e=>"Enter"===e.key&&l(),tabIndex:0,className:av.highlight,children:a(U,{variant:"button-01",elementType:"span",children:i})})}}):null;return a("div",{ref:_,children:i(t_,{ready:!p||null!=f&&s.length>0,placeholder:i(r,{children:[a(U,{variant:"title-03",children:n}),a(ti,{marginTop:"spacing-02",marginBottom:"spacing-03"}),a(tv,{step:1,isConnected:!0,isExpanded:c}),a(tv,{step:2,isConnected:!0}),a(tv,{step:3})]}),children:[a(U,{variant:"title-03",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_title","data-automation-day-id":t},children:n}),f&&a(U,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-03",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_description","data-automation-day-id":t},children:f}),s.length>0&&s.map((i,r)=>a(tm,{tripId:e,dayId:t,item:i,locationId:l,initiallyExpanded:c&&0===r,step:r+1,isConnected:r!==s.length-1,loading:p,onSaveFeedbackItem:u,onIndividualSaveComplete:m},i.id))]})})},ag={text:"yEZLz _T",completed:"xSFoe"},a_=({text:e,keySpeed:t=25,onComplete:i})=>{var[r,n]=l([]),[o,d]=l(!1),s=c([...e].reverse());return p(()=>{var e=setInterval(()=>{if(s.current.length<=0){d(!0),i?.(),clearInterval(e);return}var t=s.current.pop();n(e=>e.concat(t||""))},t);return()=>{clearInterval(e)}},[t,i,e]),a("div",{className:O(ag.text,o&&ag.completed),children:r.join("")})},af={poweredByAI:"GZJOX f Q2",iconBrand:"vTQRY Rb f",ctaDisclaimerWrapper:"yrPGt f MJ",saveOrViewTripCtaWrapper:"ZPXDt"},ab=({isOpen:e,close:t,children:i})=>{var r=c(null);return p(()=>{if(r.current&&"undefined"!=typeof IntersectionObserver){var a=new IntersectionObserver(([a])=>{!a.isIntersecting&&e&&t()},{rootMargin:"-160px 0px 0px 0px"});return a.observe(r.current),()=>{a.disconnect()}}return()=>{}},[t,e]),a("div",{ref:r,children:i})},ay=({onClose:e,tripId:t})=>{var{localize:i}=f(),r=eg(t),n=u(t=>{e(t),r({itemName:"CloseHotelsListShelf",customData:{reason:t}})},[e,r]);return a(ej,{items:o(()=>[{key:"have_place_to_stay",content:i.string("trips_v2_gai_places_to_stay_close_option_have_place"),onClick:()=>n("have_place_to_stay"),icon:eL},{key:"dont_like_options",content:i.string("trips_v2_gai_places_to_stay_close_option_dont_like"),onClick:()=>n("dont_like_options"),icon:eM},{key:"not_looking",content:i.string("trips_v2_gai_places_to_stay_close_option_not_looking"),onClick:()=>n("not_looking"),icon:eR}],[i,n]),above:!0,alignEdge:"right",isUpdatedOnScroll:!0,children:(e,t,r,n)=>a(ab,{close:r,isOpen:n,children:a(M,{ref:e,variant:"clear",icon:k,"aria-label":i.string("common_Close"),size:"small",onClick:t})})})},aT={gaiDescriptionIcon:"fReED",descriptionContainer:"eEhMp f",descriptionWrapper:"xhvGI",reviewSnippet:"Ctfoc"},aI=({descriptionText:e,reviewSnippet:t,isAIGenerated:r,numLinesToShow:n})=>{var{localize:l}=f(),d="MOBILE"===S()?1:2,{review:s,text:c}=t||{},p=o(()=>s?.userProfile?.avatar?.photoSizes&&s.userProfile.route?.url?a(ea,{theme:"image",href:s.userProfile.route.url,target:"_blank",children:a(eW,{size:"xs",source:s.userProfile.avatar.photoSizes,marginRight:"spacing-02"})}):!t&&r?a(eH,{className:aT.gaiDescriptionIcon,src:"/img2/trips/itinerary_description_icon_gai.svg","data-automation":"trip_card_description_gai_icon"}):null,[s?.userProfile?.avatar?.photoSizes,s?.userProfile?.route?.url,t,r]),u=o(()=>c&&s?.userProfile?.displayName&&s.userProfile.route?.url&&s.route?.url?i(U,{elementType:"span",display:"inline",variant:"supporting-01",color:"secondaryText",dataAttributes:{"data-automation":"trip_card_description"},children:[a(ea,{theme:"none",href:s.route.url,target:"_blank",children:a("span",{className:aT.reviewSnippet,children:`"${c.trim()}"`})})," - ",a(ea,{theme:"standalone",href:s.userProfile.route.url,target:"_blank",children:s.userProfile.displayName})]}):a(eF,{ctaNewline:!0,numLinesToShow:n||d,webkitLineClamp:!0,collapsible:!0,cta:a(x,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_more"},children:l.string("common_Read_more")}),ctaCollapse:a(x,{variant:"primary-small",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_card_description_read_less"},children:l.string("common_Readless")}),children:i("p",{className:aT.descriptionWrapper,children:[a(U,{elementType:"span",display:"inline",variant:"supporting-01",color:"secondaryText",dataAttributes:{"data-automation":"trip_card_description_expanded"},children:e}),r&&a(U,{elementType:"span",display:"inline",color:"placeholderText",variant:"supporting-01",dataAttributes:{"data-automation":"trip_card_description_ai_generated"},children:a(_,{id:"trips_cards_narration"})})]})}),[c,s?.userProfile?.displayName,s?.userProfile?.route?.url,s?.route?.url,n,d,l,e,r]);return i("div",{className:aT.descriptionContainer,children:[p,u]})},aw=e=>e.replace(/-/giu,"_"),ak=e=>eU(ev(eZ(e)||new Date,1)),aC=({baseUrl:e,geoId:t,tripDate:a})=>{if(!e)return"";var i=a?.exactDate?.endDate&&a.exactDate.endDate===a.exactDate.startDate?ak(a.exactDate.endDate):a?.exactDate?.endDate;return`${e}${t?`-g${t}`:""}${a?.exactDate?.startDate&&i?`?staydates=${aw(a.exactDate.startDate)}_${aw(i)}`:""}`},aN=(e,t,a,i,r)=>ed({latitude:e,longitude:t},{latitude:a,longitude:i},r),aP={container:"NabfV Re Pj PX Pw PJ B1 Z BB z",cardHeader:"FyeBt Fo G",header:"weMCn G",headerMedia:"avaGt w",title:"AxtVP MH o",locationInfo:"VfMrM K e",amenities:"oatnA",amenity:"xhvHV",amenityIcon:"qlWmS",description:"Hhutp"},aS=e=>e.detail?.__typename==="Hotel"?e.detail?.hotel?.providerStarRating:void 0,aD=({tripId:e,tripDate:t,hotelLocation:r,onClick:n,onIndividualSaveComplete:l,isDescriptionAIGenerated:d=!1})=>{var{localize:s}=f(),c=eh(),p=eg(e),{name:m,locationId:v,locationV2:h,locationDescription:g,photos:b,route:y,reviewSummary:T,reviewSnippet:I,latitude:w,longitude:k}=r,C=es(),{rating:P,count:D}=T||{},{bestAwardForActiveYearV2:x,hierarchy:M}=h||{},B=M?.naturalParent?.geocode?.latitude,E=M?.naturalParent?.geocode?.longitude,A="MOBILE"===S(),O=e=>{n?.(),p({itemName:"HotelsListClick",customData:{itemId:r.locationId,clickedOn:e}})},{price:L,loading:R}=eq({location:r,checkInDate:t?.exactDate?.startDate||"",checkOutDate:t?.exactDate?.endDate||"",boldPrice:!0},!r?.locationId||!t?.exactDate?.startDate||!t?.exactDate?.endDate),j=aC({baseUrl:y?.url,tripDate:t}),z=(t,a)=>{c({itemName:"SuccessfulItemSave",itemType:"ViewGAI",customData:{itemId:v,gaiTripId:e,destinationTripId:a,saveCreationMethod:"GAI",isNew:"CREATED"===t}})},V=aS(r),F=o(()=>{if(!B||!E||!w||!k)return null;var e=aN(B,E,w,k,C);return e?"MILES"===C?a(_,{id:"trips_for_you_card_hotel_distance_from_center_miles",args:{distance:e.toFixed(1)}}):a(_,{id:"trips_for_you_card_hotel_distance_from_center_km",args:{distance:e.toFixed(1)}}):null},[B,E,w,k,C]),{setSelectedItemId:W}=N(),Z=u(()=>{A||W(v)},[W,v,A]),Y=u(()=>{W(null)},[W]),$=o(()=>r?.detail?.__typename==="Hotel"?[...(r.detail?.tags?.reduce((e,t)=>(t?.tagId&&t.tagId in tI&&e.set(t.tagId,tI[t.tagId]),e),new Map)||new Map).entries()].map(([e,t])=>i("div",{className:aP.amenity,children:[a(eV,{className:aP.amenityIcon,tagId:Number(e)}),a(U,{variant:"supporting-01",elementType:"span",children:t})]},e)):[],[r]);return i("div",{"data-automation":"intermediate_hotel_card",className:aP.container,onMouseEnter:Z,onMouseLeave:Y,children:[i("div",{className:aP.header,children:[b?.[0]?.photoSizes?a("div",{className:aP.headerMedia,children:a(X,{roundedCorners:!0,award:x?.year?a(ei,{size:"large",color:"BOTB"===x.awardType?"yellow":"green",year:x.year}):void 0,action:a(ec,{id:v??0,type:"location",onSaveComplete:l,viewTripOpensNewTab:!0,onViewTripToastVisible:z,onAutosavedToTripToastVisible:z,sourceTripId:e}),children:a(ea,{"data-automation":"intermediate_hotel_card_image",display:"block",theme:"image",href:j,target:"_blank",onClick:()=>O("image"),children:a(et,{source:b[0].photoSizes,width:140,height:140,aspectRatio:"1:1"})})})}):null,i("div",{children:[i("div",{className:aP.cardHeader,children:[a(ea,{href:j,onClick:()=>O("title"),target:"_blank",theme:"standalone",children:a(U,{variant:"title-04",dataAttributes:{"data-automation":"intermediate_hotel_card_title"},children:a("span",{className:aP.title,children:m})})}),P&&D&&a(ea,{href:j,onClick:()=>O("review-data"),target:"_blank",theme:"standalone",children:a(eD,{size:"small",rating:P,numReviews:D})})]}),i("div",{className:aP.locationInfo,children:[F&&a(eG,{content:F,icon:G,dataAttributes:{"data-automation":"intermediate_hotel_card_distance"}}),!!V&&a(eG,{content:s.string("trips_for_you_card_hotel_class",{hotelClass:V}),icon:eL}),R?a(q,{width:"100%",height:"17px"}):L&&a(U,{variant:"supporting-01",dataAttributes:{"data-automation":"intermediate_hotel_card_price"},children:L})]})]})]}),$?.length||g?a(H,{marginTop:"spacing-03",marginBottom:"spacing-03"}):null,$.length?a("div",{className:aP.amenities,children:$}):null,(g||I)&&a("div",{"data-automation":"intermediate_hotel_card_description",className:aP.description,children:a(tT,{numLinesToShow:5,descriptionText:g,isAIGenerated:d,reviewSnippet:I})})]})},ax={shelf:"NTMtN",carousel:"lrZNb f Q3 _t _h",arrowLeft:"Ahasf X0 Z1",arrowRight:"tRvns X0 Z1"},aM=({icon:e,label:t,onClick:i})=>a(M,{icon:e,variant:"primary-border","aria-label":t,onClick:i}),aB=({children:e})=>{var[t,r,n,l]=eY({threshold:100}),{localize:o}=f(),d=e=>{if(r){var t=r.children[0],a=r.children[1].offsetWidth+t.offsetLeft;r.scrollBy({left:("LEFT"===e?-1:1)*a,behavior:"smooth"})}};return i("div",{className:ax.shelf,children:[a("div",{ref:t,className:ax.carousel,children:e}),n&&a("div",{className:ax.arrowLeft,children:a(aM,{icon:e$,label:o.string("common_Previous"),onClick:()=>d("LEFT")})}),l&&a("div",{className:ax.arrowRight,children:a(aM,{icon:eJ,label:o.string("common_Next"),onClick:()=>d("RIGHT")})})]})},aE=({onClose:e,placesToStay:t,tripId:r,tripDate:n})=>{var l=e_(r);return i("div",{ref:eI(()=>{l({itemName:"HotelsListShelf",customData:{hotelIds:t.flatMap(e=>e.locationId)}})}),children:[i("div",{className:"MJ f k u",children:[a(U,{variant:"title-03",marginRight:"spacing-03",children:a(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})}),a(ty,{onClose:e,tripId:r})]}),a(U,{variant:"body-01",color:"placeholderText",marginBottom:"spacing-04",children:a(_,{id:"trips_v2_gai_trip_preview_places_to_stay_description"})}),a(tk,{children:t.map(e=>a(tw,{hotelLocation:e,tripId:r,tripDate:n},e.locationId))})]})},aA=({geoId:e,tripId:t,tripDate:r})=>{var n=aC({baseUrl:"Hotels",geoId:e,tripDate:r}),l=eg(t),o=e_(t);return i("div",{ref:eI(()=>{o({itemName:"SeeMoreHotels"})}),children:[a(U,{variant:"title-03",marginBottom:"spacing-04",children:a(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})}),i("div",{className:"PQOmJ f Pk PY Px PK Q3 Re",children:[a("div",{className:"HiKTX f F0 u j Re",children:a(eL,{size:24})}),i("div",{children:[a(U,{variant:"body-01",marginBottom:"spacing-01",children:a(_,{id:"trips_v2_gai_places_to_stay_alert_text"})}),a(x,{href:n,onClick:()=>{l({itemName:"ClickSeeMoreHotels"})},target:"_blank",children:a(_,{id:"trips_v2_gai_places_to_stay_alert_link"})})]})]})]})},aO=({onUndo:e,tripId:t})=>{var[r,n]=d(Y),l=eg(t);return u(t=>{var o=a(eQ,{onClick:()=>{e(),n(),l({itemName:"UndoHotelsShelfClose",customData:{reason:t}})},children:a(_,{id:"stat_modal_undo"})});r({node:a(Z,{cta:o,children:i(eK,{display:"flex",alignItems:"center",children:[a(eX,{size:24,marginRight:"spacing-03"}),a("span",{children:a(_,{id:"trips_v2_gai_places_to_stay_toast_message"})})]})})})},[n,r,e,l])},aL=({geoId:e,onDismiss:t,onSelectMenuOption:i,onDismissUndo:r,placesToStay:n,tripId:d,tripDate:s})=>{var[c,p]=l("carousel"),{sectionRefMapping:m}=tL(),v=m.get(ar(ai)),h=tP({onUndo:u(()=>{p("carousel"),r()},[r]),tripId:d}),g=u(e=>{i(),"dont_like_options"===e?p("see-more"):(t(),h(e))},[h,t,i]),_=o(()=>{switch(c){case"carousel":return a(tC,{onClose:g,placesToStay:n,tripId:d,tripDate:s});case"see-more":return a(tN,{geoId:e,tripId:d,tripDate:s});default:return null}},[e,g,n,c,s,d]);return a("div",{ref:v,children:_})},aR=({tripId:e,tripTitle:t,tripDescription:n,geoId:o,days:d,tripDate:s,loading:c,onReady:m,onSaveFeedbackItem:v,onIndividualSaveComplete:h,saveOrViewTripCta:g})=>{var[_,f]=l(!1),[b,y]=l(!1),{showPlacesToStay:T,setSavePlacesToStay:I,placesToStay:w,setShowPlacesToStay:k}=B();p(()=>{if(n&&_&&!b){var e=setTimeout(()=>{y(!0)},1e3);return()=>clearTimeout(e)}},[_,b,n]);var C=u(()=>{f(!0),m?.()},[m]);return a($,{children:i("div",{children:[i("div",{className:af.ctaDisclaimerWrapper,children:[i("div",{className:af.poweredByAI,children:[a("div",{className:af.iconBrand,children:a(W,{size:16})}),a(U,{variant:"supporting-02",color:"placeholderText",children:"This trip is powered by AI."})]}),!c&&g&&a("div",{className:af.saveOrViewTripCtaWrapper,children:g("top")})]}),t&&a(U,{variant:"title-02",marginBottom:"spacing-04",dataAttributes:{"data-automation":"trips_gai_preview_trip_title"},children:a(tb,{text:t,onComplete:C})}),(_||!c)&&a(t_,{ready:!!n||!c,placeholder:a(ti,{}),children:!!n&&a(U,{variant:"body-01",dataAttributes:{"data-automation":"trips_gai_preview_trip_description"},children:n})}),T&&!!w?.length&&i(r,{children:[a(H,{marginY:"spacing-04"}),a(tS,{tripId:e,geoId:o,tripDate:s,onDismiss:()=>k(!1),onDismissUndo:()=>{k(!0),I(!1)},onSelectMenuOption:()=>I(!1),placesToStay:w})]}),(b||!c)&&i(r,{children:[a(H,{marginY:"spacing-04"}),d.map(({id:t,title:i,description:r,formattedDescription:n,items:l},d)=>a(tf,{tripId:e,id:t,geoId:o,title:i,formattedDescription:n,fallbackDescription:r,items:l,expandFirstItem:0===d,loading:c,onSaveFeedbackItem:v,onIndividualSaveComplete:h},t))]})]})})};function aj(e){var[t,a]=l(!1);return u((...i)=>{t||(a(!0),e(...i))},[e,t])}var az={bar:"eAdfK w",fade:"TnzZF",progress:"nDHWc",message:"PXCKk f K o F",spacer:"ghkJD"},aV=({progress:e=0,message:t,"aria-label":r})=>{var[n,o]=l(0),[d,s]=l("LOADING");return 0!==n&&e>n&&o(e),p(()=>{0===n&&o(e)},[n,e]),p(()=>{if(100===n){var e=setTimeout(()=>{s("COMPLETE")},1e3),t=setTimeout(()=>{s("HIDDEN")},2e3);return()=>{clearTimeout(e),clearTimeout(t)}}},[n]),"HIDDEN"!==d?i("div",{className:O(az.bar,"LOADING"!==d&&az.fade),role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n,"aria-label":r,children:[a("div",{className:az.progress,style:{width:`${n}%`}}),t&&i("div",{className:az.message,style:{width:`${n}%`},children:[a("span",{className:az.spacer}),a(U,{variant:"supporting-02",color:"accentPurpleText",children:t})]})]}):null},aG={gaiTrip:"OKHCk",content:"KUkEb",itinerary:"CamCP",map:"PWuLm",mapWrapper:"vNChN",tabBar:"bYkpq QA z",chip:"uXLJv",progressBar:"MYIBl l",closeButton:"imZtv Z1"},aq=({tripId:e,title:t,description:n,days:d,tripDate:s,centerPoint:c,geoId:m,loading:v,progress:h=0,scrollContainerRef:b,onSaveFeedbackItem:y,modalHeader:C,onClose:N,saveOrViewTripCta:D,onIndividualSaveComplete:x})=>{var[A,O]=l(v),L=w(),R=I(),{localize:j}=f(),z="MOBILE"===S(),{showPlacesToStay:V,setShowPlacesToStay:G,setSavePlacesToStay:q,setPlacesToStay:F}=B(),{placesToStay:H,fetching:W}=E({tripId:e});p(()=>{H?.length&&!W&&(G(!0),q(!0),F(H))},[W,H,F,q,G]);var U=aj(u(()=>{R("TripGaiTripDetails",{date:new Date().toISOString(),timestamp:Date.now(),tripId:e,title:t,titleNarration:n,days:d.map(e=>({day:e.title,dayNarration:e.description,items:e.items.map(e=>({id:e.id,location:e.locationItem?.object?.name,GAIItemNarration:e.gaiNarration,bookableExperienceId:t9(e)}))}))})},[d,n,R,t,e])),Z=aj(u(()=>{R("TripGAITripGenerated",{date:new Date().toISOString(),timestamp:Date.now(),tripId:e})},[R,e]));p(()=>{v||U()},[v,U]);var Y=u(()=>{Z(),O(!1)},[Z]),$=o(()=>{var e=new Map;return e.set(ar(ai),g()),d.flatMap(e=>[ar(e.id),...e.items.map(t=>an(e.id,t.id))]).reduce((e,t)=>(e.set(t,g()),e),e)},[d]),J=d[0]?$.get(ar(d[0].id)):void 0,X=o(()=>[...V?[$.get(ar(ai))]:[],...d.map(e=>$.get(ar(e.id)))].filter(Boolean),[d,V,$]),Q=(t,a)=>{var i=$.get(ar(t));i&&(L("TripDetailsDayJump",{tripId:e,dayId:t}),a(i))},K=u(t=>{var a=d[t];a&&L("TripDetailsScroll",{tripId:e,day:a.title})},[d,L,e]),ee=v?Math.min(h,A?20:100):100,et=ee<=85?j.string("trips_gai_entry_finalizing_itinerary"):void 0;return a(P,{children:i(te,{scrollContainerRef:b,sectionRefMapping:$,children:[J&&!v&&a(tt,{saveOrViewTripCta:D,onActiveTabChange:K,anchorRef:J,tabSectionRefs:X,tabBar:(e,t)=>i(r,{children:[z?C:null,a(e1,{value:t,fullBleed:!1,children:i("div",{className:aG.tabBar,children:[V&&a("div",{className:aG.chip,children:a("div",{children:a(e0,{widthVariant:"full",selected:0===t,onClick:()=>Q(ai,e),"aria-label":j.string("trips_v2_gai_trip_preview_places_to_stay_heading"),dataAttributes:{"data-automation":"trips_gai_preview_trip_places_to_stay_tab"},children:a(_,{id:"trips_v2_gai_trip_preview_places_to_stay_heading"})})})},ai),d.map((i,r)=>a("div",{className:aG.chip,children:a(e0,{widthVariant:"full",selected:V?r+1===t:r===t,onClick:()=>Q(i.id,e),"aria-label":i.title?.toString(),dataAttributes:{"data-automation":"trips_gai_preview_trip_day_tab","data-automation-day-id":i.id},children:i.title})},i.id))]})})]})}),i("div",{className:aG.gaiTrip,children:[a("div",{className:aG.progressBar,children:a(tx,{progress:ee,message:et})}),a(T,{children:i("div",{className:aG.content,children:[a("div",{className:aG.itinerary,children:a(tD,{tripId:e,tripTitle:t,geoId:m,tripDescription:n,days:d,tripDate:s,loading:v,onReady:Y,onSaveFeedbackItem:y,onIndividualSaveComplete:x,saveOrViewTripCta:D})}),i("div",{className:aG.map,children:[z?a("div",{className:aG.closeButton,children:a(M,{onClick:N,icon:k,size:"small","aria-label":j.string("common_Close"),dataAttributes:{"data-automation":"trips_gai_modal_close_button_map"}})}):null,a("div",{className:aG.mapWrapper,children:a(th,{tripId:e,days:d,centerPoint:c,geoId:m,loading:v,hideMarkers:A})})]})]})})]})]})})},aF=({tripId:e,onSaveFeedbackItem:t,saveOrViewTripCta:i,onIndividualSaveComplete:r})=>{var{trip:n,fetching:l}=tp(e,null,"COMPLETE");if(!n)return null;var{title:o,description:d,days:s,centerPoint:c,geoId:p,progress:u,tripDate:m}=n;return a(aq,{tripId:e,title:o,description:d,days:s,tripDate:m,centerPoint:c,geoId:p,loading:l,onSaveFeedbackItem:t,progress:u,saveOrViewTripCta:i,onIndividualSaveComplete:r})};function aH({trip:e,saveOrViewTripCta:t,...i}){return e?a("div",{className:"vnYqC f e Q2",children:a(aq,{title:e.title,description:e.description,days:e.days,tripDate:e.tripDate,centerPoint:e.centerPoint,geoId:e.geoId,progress:e.progress,saveOrViewTripCta:t,...i})}):null}function aW({tripId:e,tripTitle:t,placesToStay:r,onSave:n,onItemClick:l,onCreateTripInputChange:o,variant:d="light",position:s}){var c=w(),p=I();return a(e3,{saveObject:{id:e,type:"gaiTrip"},additionalItemReferences:r?.reduce((e,t)=>(t.locationId&&e.push({id:t.locationId.toString(),type:"location"}),e),[]),initialTripTitle:t,active:!1,object:null,onComplete:(e,t)=>n(t),onItemClick:l,onCreateTripInputChange:o,onViewTripToastVisible:(t,a)=>{p("SuccessfulItinerarySave",{gaiTripId:e,destinationTripId:a,saveCreationMethod:"GAI",isNew:"CREATED"===t})},showPlacesToStay:!!r?.length,children:t=>a(D,{onClick:()=>{c("TripDetailsSaveItinerary",{tripId:e,position:s}),t()},variant:"light"===d?"gai":"gai-dark",dataAttributes:{"data-automation":"trips_gai_preview_trip_save_itinerary_button"},children:i("div",{className:"f u j",children:[a(e2,{marginRight:"spacing-01"}),a(_,{id:"trips_gai_modal_save_itinerary_cta"})]})})})}var aU={__key:0x98d4684e840f,id:"98d4684e840fa57a",loc:{},definitions:[]},aZ=e=>"COMPLETE"===e,aY=e=>"ERROR"===e||"UNKNOWN"===e,a$=(e,t)=>aZ(e)?"COMPLETE":aY(e)?"ERROR":t?"LOADING":"ERROR",aJ=e=>{var[{fetching:t,data:a}]=e4({query:aU,variables:{request:{tripId:e||0}},isResultComplete:({data:e})=>{var t=e?.Trips_getGeneratedTripStatus?.status??null;return aZ(t)||aY(t)},pollIntervals:tB,pause:!e}),i=a?.Trips_getGeneratedTripStatus?.status??null,r=a?.Trips_getGeneratedTripStatus?.lastUpdated??null,n=a$(i,t);return o(()=>({status:n,lastUpdated:r}),[n,r])},aX=({data:e})=>a("pre",{children:JSON.stringify(e,null,2)}),aQ=({tripId:e})=>{var{path:t}=e6(),[{data:r}]=eO({query:t6,variables:{tripIds:[e??0],currency:y()},requestPolicy:"cache-only",pause:!e}),n=r?.Trips_getTrips?.[0];if(!n)return a(U,{variant:"body-01",children:"Loading trip details..."});var{id:l,title:o,tripLocations:d,generatedTripRequest:s}=n||{};return i("div",{children:[a(U,{variant:"title-04",marginBottom:"spacing-03",children:o}),a(U,{variant:"title-05",marginBottom:"spacing-01",children:"Trip ID"}),a(U,{variant:"body-01",children:a(ea,{theme:"inline",href:`${t}#/TripBuilder/${l}`,children:l})}),a(H,{marginY:"spacing-03"}),a(U,{variant:"title-05",marginBottom:"spacing-01",children:"Requested Params"}),a(aX,{data:s}),a(H,{marginY:"spacing-03"}),a(U,{variant:"title-05",marginBottom:"spacing-01",children:"Trip Locations"}),a(aX,{data:d})]})},aK=({tripId:e})=>(e8("GAI Trip",o(()=>a(aQ,{tripId:e}),[e])),null);return e({GaiTripPreview:aH,SaveToTripButton:aW}),[()=>{e9=s(null),e5=tE,e7=s(null),te=tO,tt=n.memo(tV),ta=tq,ti=tH,tr=tW,tn=tU,to=(tl=[{value:"dislike_recommendation",label:a(_,{id:"trips_gai_feedback_bad_recommendation"})},{value:"wrong_description",label:a(_,{id:"trips_gai_feedback_wrong_description"})},{value:"unrelated_link",label:a(_,{id:"trips_gai_feedback_unrelated_page"})}]).map(e=>e.value),td=t1,ts=t4,tc=t8,tp=aa,tu=m(function({step:e,title:t,content:r,isOpen:n,onExpandCollapseClick:l,onMouseEnter:o,onMouseLeave:d,isConnected:s=!0,dataAttributes:c},p){var u=a("div",{className:al.marker,children:a(U,{variant:"button-03",children:e})});return i("div",{className:al.container,ref:p,onMouseEnter:o,onMouseLeave:d,children:[i("div",{className:al.sidebar,children:[u,a("div",{className:s?al.bar:void 0})]}),a("div",{className:al.card,...c?.card,children:a(J,{question:i(U,{variant:"title-04",elementType:"span",dataAttributes:{"data-automation":"trips_gai_preview_trip_day_item_title"},children:[a("span",{className:al.titleMarker,children:u}),t]}),answer:r,answerType:"custom",onExpandCollapseClick:l,isExpanded:n})})]})}),tm=ao,tv=ad,th=ac,tg=ap,t_=am,tf=ah,tb=a_,ty=ay,tT=aI,tI={[ez.FreeBreakfast]:a(_,{id:"hotel_amenity_free_breakfast"}),[ez.Pool]:a(_,{id:"hotel_amenity_pool"}),[ez.FreeWifi]:a(_,{id:"hotel_amenity_free_wifi"})},tw=aD,tk=aB,tC=aE,tN=aA,tP=aO,tS=aL,tD=aR,tx=aV,tM=aF,tB=[...Array(15).fill(2e3),...Array(10).fill(3e3),...Array(12).fill(5e3),...Array(42).fill(1e4)],e({GaiTripDebugger:aK,GaiTripPreview:aH,IntermediateScreen:tM,SaveToTripButton:aW,getBookableExperienceId:t9,useGetGeneratedTrip:tp,useGetGeneratedTripStatus:aJ})},[e=>(a=e.jsx,i=e.jsxs,r=e.Fragment),e=>(n=e,l=e.useState,o=e.useMemo,d=e.useContext,s=e.createContext,c=e.useRef,p=e.useEffect,u=e.useCallback,m=e.forwardRef,v=e.Suspense,h=e.Fragment,g=e.createRef),e=>(_=e.default,f=e.useLocalize,b=e.useIntlFormatter,y=e.useCurrency),e=>T=e.default,e=>(I=e.usePreviewImpressionLogger,w=e.usePreviewInteractionLogger),e=>k=e.default,e=>(C=e.default,N=e.useTripsMapContext,P=e.TripsMapProvider),e=>S=e.useViewportCategory,e=>(D=e.default,x=e.BorderlessButton,M=e.CircularButton),e=>(B=e.usePlacesToStayContext,E=e.useFetchPlacesToStay),e=>A=e.useKeyboardNavigationMode,e=>O=e.default,e=>L=e.default,e=>R=e.default,e=>j=e.ErrorBoundary,e=>z=e.ModalBase,e=>V=e.default,e=>G=e.default,e=>q=e.Skeleton,e=>F=e.default,e=>H=e.default,e=>W=e.default,e=>U=e.default,e=>(Z=e.ToastItem,Y=e.Toast,$=e.ToastProvider),e=>J=e.ControlledCollapsibleListItem,e=>(X=e.CardMedia,Q=e.FlexCard,K=e.CardContent,ee=e.CardText),e=>et=e.default,e=>ea=e.default,e=>ei=e.default,e=>er=e.default,e=>(en=e.TripLocationIconContent,el=e.getLocationReviewData,eo=e.CardHeaderElement,ed=e.haversineDistance,es=e.useDistanceUnit),e=>ec=e.default,e=>(ep=e.getSATDModalSaveObject,eu=e.getLocationPhotos),e=>(em=e.isLocationItemObject,ev=e.addDays),e=>(eh=e.useImpressionLogger,eg=e.useViewGaiInteractionLogger,e_=e.useViewGaiImpressionLogger),e=>ef=e.default,e=>eb=e.default,e=>(ey=e.ToastProvider,eT=e.useToast),e=>eI=e.useOnVisible,e=>ew=e.default,e=>ek=e.default,e=>eC=e.useVDOMPortal,e=>eN=e.ModalContainer,e=>eP=e.TextInput,e=>eS=e.Checkbox,e=>eD=e.BubbleRatingWithReviewCount,e=>ex=e.default,e=>eM=e.default,e=>(eB=e.default,eE=e.getMarginProps,eA=e.margin),e=>eO=e.useQuery,e=>eL=e.default,e=>eR=e.default,e=>ej=e.PopoverMenu,e=>(ez=e.amenityTags,eV=e.TagIcon),e=>eG=e.IconDetail,e=>eq=e.useHotelPrice,e=>eF=e.ReadMore,e=>eH=e.CdnImage,e=>eW=e.Avatar,e=>(eU=e.dateToISOString,eZ=e.isoStringToDate),e=>eY=e.useCanScroll,e=>e$=e.default,e=>eJ=e.default,e=>eX=e.default,e=>eQ=e.default,e=>eK=e.Box,e=>e0=e.ChipButton,e=>e1=e.TabBar,e=>e2=e.default,e=>e3=e.TripFlowSelector,e=>e4=e.usePollingQuery,e=>e8=e.useDebugPane,e=>e6=e.useRoute]]},["21h32l","o4yt4q","7thqz4","94v69w","ibebqy","qkjm8h","amwhbz","ys6v1o","jppfwt","aj74qn","2r4qug","fkji80","d6vj30","dsbyen","83pm0d","uzmmz7","7nq86i","bp96i9","qndsds","ndszpi","covaqn","qk22ay","essqvy","tr3542","ahn2ts","6m9vgr","34bu7w","lr6tb6","p9ucm8","2rns1i","9l2zsy","dpzonz","xznza0","r6ayw2","sa2a6q","s1ymgp","ec91du","nntg4s","3btuy0","wehxiu","n4zdla","4euaes","i3sz5h","u3aiot","frf6ac","bkeq24","u47wjb","w43m8k","gw8uw6","mqwhqn","c5q3iu","43er8k","s2gl90","ztz79u","70j2tf","vtj79r","wgun1f","s6q22n","ljqkwp","o5y7tg","c4482w","a6i9w3","6qmqhw","d3i8k1","6g4avl","lyyh8d","b1cljk","227h6c","l75rcq","9rb8bq","fbuhsy","uvk21c","fgwvq1"]]);
