(this.$WP=this.$WP||[]).push(["9pmixz",(t,e)=>{var s,i,r,o,a,n,h,p,l,u,c,d,g,m,v,w,x,S,f,C,P,I,b,N,k,T,M,L=t=>{var{localize:e}=h();return s("div",{className:"rpenj R4 _Q f u j",children:s("span",{className:"iNXNY S2 H2 c b",children:e("carousel_progress_numbers",{photos:t.currentIndex,totalPhotos:t.numItems})})})},z={carousel:"FSYKZ _S",childrenContainer:"epBTZ",cta:"PDqBH d S7 n q Vm",ctaWrap:"UNNen Z1 _S",washout:"rtEgV",images:"VBGdb",photo:"FQKMe",crop:"_h",current:"HeqAo",leftNav:"pyuxf Z1 _S",rightNav:"OqTrP Z1 _S",small:"WTPtd",leftNavDisabled:"nsNbR Z1",rightNavDisabled:"LErlQ Z1",hideArrows:"QQLSH",badgeContainer:"KqtfM u",optimusBadgeContainer:"IFKIs u"},y={},O=t=>N.getFrom(t),_="registerState",D={registerState:(t,e,s)=>N.action({type:_,uniqueId:t,newIndex:e,hasWrapped:s})};function W(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var R=t=>O(g().getState())[t],q=({isRight:t,size:e,onClick:i,disabled:r,allowOverClicking:o})=>{var n;if(r){if(o)return null;n=t?z.rightNavDisabled:z.leftNavDisabled}else n=t?z.rightNav:z.leftNav;return s("div",{className:a(n,e&&"small"===e?z.small:null,"is-shown-at-tablet"),onClick:i,"data-clicksource":"CarouselArrow"})},j={photostrip:"nTdOo f K",stripItem:"sjGtH _T _S",selected:"oQxrA"};function F(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var Q=({totalCount:t})=>{var{localize:e}=h(),r=p();return i("div",{className:"XZTLm _Q s l _U S5 Wh",children:[s(v,{name:"camera"}),"\xa0",s("span",{className:a("is-shown-at-tablet","qPmnQ _S"),children:e("all_photos_parens",{nCount:r.formatNumber("integer",t)})}),s("span",{className:"is-hidden-tablet",children:r.formatNumber("integer",t)})]})},A={__key:0x86cb947ed0f5,id:"86cb947ed0f5afd3",loc:{},definitions:[]};function B(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}return[()=>{b=L,(N=new d("photo-carousel",y)).setReducer((t=y,e)=>{if(e.type===_){var s=e.uniqueId,i={currentIndex:e.newIndex,hasWrapped:e.hasWrapped},r={...t};return r[s]=i,r}return t}),t("PhotoCarousel$1",C=class extends o{static getDerivedStateFromProps({displayIndex:t,totalCount:e,photos:s},{currentIndex:i}){if(void 0===t)return null;var r=(e||s.length)-1;return t!==i?{currentIndex:Math.max(Math.min(t,r),0)}:null}componentDidUpdate(){var{uniqueId:t}=this.props;this.props.saveReduxState&&t&&g().dispatch(D.registerState(t,this.state.currentIndex,this.state.hasWrapped))}render(){var{maxIndicatorDots:t=5}=this.props,e=this.props.totalCount||this.props.photos.length,o=this.props.hideArrows?z.hideArrows:null,h=this.state.currentIndex>0||this.state.hasWrapped,p=e>1&&(this.state.currentIndex<e-1||this.props.wrapPhotos),u=!this.props.noCta,d=this.state.currentIndex===this.props.photos.length-1&&this.props.totalCount!==this.props.photos.length,g=()=>{this.props.onPhotoMouseover&&this.props.onPhotoMouseover(d)};return i("div",{className:a(z.carousel,o),style:{width:this.props.width,height:this.props.height},onClick:()=>{var t=this.props.photos[Math.min(this.state.currentIndex,this.props.photos.length-1)];this.props.onClick&&t&&this.props.onClick(t.id)},onTouchStart:t=>{this.touchStart(t),g()},onTouchMove:this.touchMove,onTouchEnd:this.touchEnd,onMouseEnter:g,children:[s("ul",{className:z.images,children:this.props.photos.map((t,e)=>s("li",{"data-testid":t.id,className:a(z.photo,this.props.overflowHidden?z.crop:null,this.state.currentIndex===e?z.current:null),children:s(l,{shouldLoad:2>=Math.abs(this.state.currentIndex-e),children:this.props.imageContainer?this.props.imageContainer(t):s(m,{sources:t.photoSizes,width:"100%",height:this.props.photoHeight||"100%",notLazy:!this.props.lazyLoadImages,ssrContainerDimensions:0===this.state.currentIndex?this.props.ssrContainerDimensions:void 0,fitStrategy:this.props.fitStrategy,backgroundSizeCalculator:this.props.backgroundSizeCalculator,centerImage:this.props.centerImage})})},t.id))}),this.props.children?s("div",{className:z.childrenContainer,children:this.props.children({currentIndex:this.state.currentIndex})}):null,u?i(r,{children:[s("div",{className:z.ctaWrap,children:i("span",{className:z.cta,children:[s(v,{name:"expand"})," ",s(n,{id:"full_view"})]})}),s("div",{className:z.washout})]}):null,h?s(q,{isRight:!1,size:this.props.arrowSize,onClick:this.previous,disabled:!1,allowOverClicking:this.props.allowOverClicking}):s(q,{isRight:!1,size:this.props.arrowSize,onClick:this.swallow,disabled:!0,allowOverClicking:this.props.allowOverClicking}),p?s(q,{isRight:!0,size:this.props.arrowSize,onClick:this.next,disabled:!1,allowOverClicking:this.props.allowOverClicking}):s(q,{isRight:!0,size:this.props.arrowSize,onClick:this.swallow,disabled:!0,allowOverClicking:this.props.allowOverClicking}),!!this.props.showOptimusBadge&&s("div",{className:z.optimusBadgeContainer,children:s(c,{variant:"plus-logo-short-white",height:21})}),this.props.badgeTopLeft&&!this.props.showOptimusBadge&&s("div",{className:z.badgeContainer,children:this.props.badgeTopLeft}),this.props.showIndicatorDots&&e?s(w,{numDots:Math.min(t,e),numItems:e,currentIndex:this.state.currentIndex}):null,this.props.showProgress&&s(b,{currentIndex:this.state.currentIndex+1,numItems:e})]})}constructor(t){super(t),W(this,"swallow",t=>{t.stopPropagation()}),W(this,"previous",t=>{t.stopPropagation(),t.preventDefault(),this.nav(-1,!0,t),this.props.onNextTrackingProps&&u(this.props.onNextTrackingProps)}),W(this,"next",t=>{t.stopPropagation(),t.preventDefault(),this.nav(1,!0,t),this.props.onPreviousTrackingProps&&u(this.props.onPreviousTrackingProps)}),W(this,"nav",(t,e,s)=>{this.props.onNav&&this.props.onNav(t,e);var i,r=this.props.totalCount||this.props.photos.length,o=this.state.currentIndex+t;if(this.props.wrapPhotos||!(o>=r)&&!(o<0)){var a=this.state.hasWrapped;o>=r&&this.props.wrapPhotos&&(a=!0),(i=o<0?a?Math.max(Math.min(r,r+o),0):0:Math.max(Math.min(r,this.props.wrapPhotos?o%r:o),0))!==this.state.currentIndex&&(i>=this.props.photos.length-1-2&&this.props.onLoadLast&&this.props.onLoadLast(),this.setState({currentIndex:i,hasWrapped:a}),this.props.onPhotoChange&&this.props.onPhotoChange(i,s))}}),W(this,"swipeState",{xStart:null,xLast:null,swipeThreshold:null}),W(this,"touchStart",t=>{t&&t.currentTarget&&t.touches&&1===t.touches.length&&(this.swipeState.swipeThreshold=.1*t.currentTarget.clientWidth,this.swipeState.xStart=t.touches[0].pageX-t.currentTarget.offsetLeft,this.swipeState.xLast=null)}),W(this,"touchMove",t=>{if(t&&t.currentTarget&&t.touches&&1===t.touches.length&&null!==this.swipeState.swipeThreshold&&null!==this.swipeState.xStart){this.swipeState.xLast=t.touches[0].pageX-t.currentTarget.offsetLeft;var e=this.swipeState.xStart-this.swipeState.xLast;this.swipeState.swipeThreshold<=Math.abs(e)&&this.touchEnd(t)}}),W(this,"touchEnd",t=>{if(null===this.swipeState.swipeThreshold||null===this.swipeState.xLast||null===this.swipeState.xStart){this.swipeState.xStart=null,this.swipeState.xLast=null;return}var e=this.swipeState.xStart-this.swipeState.xLast;this.swipeState.swipeThreshold<=Math.abs(e)&&(this.swipeState.xStart=null,this.swipeState.xLast=null,this.nav(e/Math.abs(e),!1,t))});var e=0,s=!1,{uniqueId:i}=this.props;if(this.props.saveReduxState&&i){var r=R(i);e=r?.currentIndex??0,s=r?.hasWrapped??!1}this.state={currentIndex:e,hasWrapped:s}}}),k=C,t("Photostrip$1",P=class extends o{static getDerivedStateFromProps({selectedIndex:t,photos:e},{currentIndex:s}){if(void 0===t)return null;var i=e.length-1;return t!==s?{currentIndex:Math.max(Math.min(t,i),0)}:null}render(){if(!this.props.photos.length)return null;var t=Math.max(Math.min(this.state.currentIndex,this.props.photos.length-1),0),e=this.props.numItemsInRow?this.props.numItemsInRow:this.props.photos.length,i=0!==e?1/e:0;return s("div",{className:j.photostrip,children:this.props.photos.map((e,r)=>s("div",{className:a(j.stripItem,t===r?j.selected:null),style:{flexBasis:`calc(${100*i-.01}% - 2px)`},onClick:()=>this.onPhotoClick(r),children:s(m,{sources:e.photoSizes,height:"100%",width:"100%"})},e.id))})}constructor(...t){super(...t),F(this,"state",{currentIndex:0}),F(this,"onPhotoClick",t=>{this.setState({currentIndex:t}),this.props.onPhotoSelected&&this.props.onPhotoSelected(t)})}}),T=P,M=Q,t("LocationPhotoCarouselPagingProvider$1",I=class extends o{render(){if(this.props.locationId<0)return this.props.children({photos:[],photoCount:0,getNextPage:()=>{}});var t=this.getOffset(this.state.currentIndex);return s(x,{query:A,variables:{locationId:this.props.locationId,plimit:this.props.pageSize,poffset:t,filter:S()},children:({fetching:e,data:i})=>i&&i.locations&&i.locations[0]?(e||null!==this.photoCount||(this.photoCount=i.locations[0].photoCount),s(f,{data:e||!i.locations||0===i.locations.length?[]:this.getPhotos(i.locations[0],0===t),identifier:t=>String(t.id),children:t=>this.props.children({photos:t,photoCount:this.photoCount||0,getNextPage:e?()=>{}:this.getNextPageOnClick})})):null})}constructor(...t){super(...t),B(this,"state",{currentIndex:0}),B(this,"getPhotos",(t,e)=>{var s=[];return s.length<this.props.pageSize&&t.photos&&s.push(...t.photos),e&&t.thumbnail&&(s=[t.thumbnail,...s.filter(e=>e.id!==t.thumbnail.id)]),s=[...new Map(s.map(t=>[t.id,t])).values()]}),B(this,"getOffset",t=>t>=1?t+1:0),B(this,"getNextPageOnClick",()=>{this.getNextPage(this.state.currentIndex)}),B(this,"getNextPage",t=>{t<(this.photoCount||0)-1&&this.setState({currentIndex:t+this.props.pageSize})}),B(this,"photoCount",null)}}),t({LocationPhotoCarouselPagingProvider:I,PhotoCarousel:k,PhotoCount:M,Photostrip:T})},[t=>(s=t.jsx,i=t.jsxs,r=t.Fragment),t=>o=t.Component,t=>a=t.default,t=>(n=t.default,h=t.useLocalize,p=t.useIntlFormatter),t=>l=t.default,t=>u=t.default,t=>c=t.default,t=>(d=t.PrivateStateAccessor,g=t.getStore),t=>m=t.ResponsiveImage,t=>v=t.Icon,t=>w=t.default,t=>x=t.Query,t=>S=t.getMediaFilterToRetrieveAllPhotos,t=>f=t.default]]},["21h32l","o4yt4q","fkji80","7thqz4","8vod40","4axon3","sw5ax0","45ddp0","76j3t0","ybxsmg","yk7it8","mqwhqn","3w1vrt","3ky3cf"]]);
