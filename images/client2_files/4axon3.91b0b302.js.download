(this.$WP=this.$WP||[]).push(["4axon3",(e,t)=>{var r,n,i,o,a,s,c,d,l,p,u,I,g,m,h,v,T,O,_,E,A,f,S,C,N,k,w,L=(e,t,r)=>{var n=RegExp(`(-${t}([0-9]+))|([?&]${r}=([0-9]+))`).exec(e);if(n){if(void 0!==n[2])return n[2];if(void 0!==n[4])return n[4]}},P=e=>L(e,"d","detail")||L(e,"g","geo"),G=e=>{var t=/(https?:\/\/[^/]+)?\/([^#.?-]*)/.exec(e);if(t&&void 0!==t[2])return t[2]?t[2]:"Home"},R=e=>{var t=e;return null==t?"":("string"!=typeof t&&(t=t.toString()),t.replace(/!/g,"!!").replace(/\./g,"!.").replace(/\*/g,"!*"))},K=e=>Object.keys(e).map(t=>`${R(t)}.${R(e[t])}`).join("*"),b=e=>{var{value:t}=e;t?"number"!=typeof t&&Number.isNaN(t=parseFloat(t))&&(t=0):t=0;var{nonInteraction:r}=e;"boolean"!=typeof r&&(r=!0===r);var{srcServlet:n}=e;if(n)0===n.indexOf("/")&&(n=n.substring(1));else if(!n&&window&&window.location&&window.location.pathname){var i=/\/([^-]*)/.exec(window.location.pathname);n=i?i[1]:null}null===n&&(n=void 0);var{location:o}=e;o||(o=document&&document.location?P(document.location.href):null),null==o&&(o="null");var{isMemberSignedIn:a}=e;null==a&&(a=!1);var{context:s}=e;void 0===s&&(s="undefined");var c={gac:e.module,gaa:e.action,gal:s,gav:String(t),gani:String(r),gass:n,gasl:null!=o?o.toString():void 0,gapu:e.parentUid,gams:a?"1":"0",gacl:e.commerceClickLocation,gatt:e.trackingTree,bsid:e.bookingSessionId};return Object.keys(c).forEach(e=>{void 0===c[e]&&delete c[e]}),c},$=e=>{var t=r().getState();return{srcServlet:t.tracking.analytics?t.tracking.analytics.url:void 0,location:t.page.detailId||t.page.geoId,parentUid:t.tracking.uid?t.tracking.uid:void 0,isMemberSignedIn:t.auth.isMember,...e}},M={},x=e=>{var t=`${e.module||""}|${e.action||""}|${e.context||""}|${e.value||""}`;if(!M[t]){M[t]=!0;var r=b($(e));o(new URLSearchParams({...r}))}},y=e=>{var t=b($(e));o(new URLSearchParams({...t}))},B=e=>{var t,r,n=b($(e)),{destinationUrl:i}=e;e.dstServlet?t=e.dstServlet:i&&(t=G(i)||void 0,r=P(i)||"");var{gasl:o}=n;o&&"null"===o&&(o="");var a={...n,gads:t||e.dstServlet,gadl:r,gasl:o};return Object.keys(a).forEach(e=>{void 0===a[e]&&delete a[e]}),a},V=(e,t,n)=>{var i=n;i||(i=r().getState().meta.cookieDomain);var o=B(e),{gass:a,gac:s="null",gaa:c="null",gal:d="null"}=o;if(!a)throw Error(`Src servlet undefined, gac:${s}, gaa:${c}, gal:${d}`);if(!o.gads)throw Error(`Dst servlet undefined, gac:${s}, gaa:${c}, gal:${d}`);var l=new Date;l.setTime(l.getTime()+5e3);var p=`${encodeURIComponent(K(o))}; domain=${i}; path=/; expires=${l.toUTCString()}`;document.cookie=`EVT=${p}`},H=(e,t)=>{var i,o=t;o||(o=r().getState().meta.cookieDomain);try{if((i=n.get("MEVT")||"").length>0&&(i+="~"),(i+=K(e)).length>1024)throw Error("MEVT Cookie is full");var a=new Date;a.setTime(a.getTime()+5e3);var s=`${encodeURIComponent(i)}; domain=${o}; path=/; expires=${a.toUTCString()}`;document.cookie=`MEVT=${s}`}catch(e){return!1}return!0},D=(e,t)=>{var r={...t,once:void 0,children:void 0},{target:n,currentTarget:o}=e;if(n&&o&&n instanceof HTMLElement){var a=n;do{if(a instanceof HTMLElement&&a.dataset.encodedUrl){var s=i(a.dataset.encodedUrl),c=document.createElement("a");c.href=s,a.parentElement instanceof HTMLElement&&(c.style.display="none",a.parentElement.appendChild(c)),a=c}if(a instanceof HTMLAnchorElement){var d=a;if(window&&window.location&&window.location.hostname&&window.location.hostname===d.hostname){var l=d.href;V({...r,destinationUrl:l});return}}a=a.parentElement}while(a&&a!==o)}y(r)};function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=()=>window.JS_SECURITY_TOKEN,q=()=>({"content-type":"application/json","x-requested-by":j()}),W=(e,t,r)=>{var n=new URLSearchParams;n.append("event_name",t),n.append("event_type",e),n.append("attr",JSON.stringify(r)),fetch(`/UserTrackingRecord?${n.toString()}`,{method:"GET",headers:q(),credentials:"same-origin"}).then(e=>(e.ok||e.statusText,e)).catch(r=>{console.error(`Error sending tracking event for ${e}-${t}. Err message is: ${r.message}`)})},Y={PAGEVIEW:"PAGEVIEW",START_BOOKING:"START_BOOKING",BOOKING_CONFIRMATION:"BOOKING_CONFIRMATION",PAGEVIEW_FLIGHT:"PAGEVIEW_FLIGHT",START_BOOKING_FLIGHT:"START_BOOKING_FLIGHT",BOOKING_CONFIRMATION_FLIGHT:"BOOKING_CONFIRMATION_FLIGHT",PAGEVIEW_TRAIN:"PAGEVIEW_TRAIN",START_BOOKING_TRAIN:"START_BOOKING_TRAIN",BOOKING_CONFIRMATION_TRAIN:"BOOKING_CONFIRMATION_TRAIN",PAGEVIEW_PACKAGE:"PAGEVIEW_PACKAGE",START_BOOKING_PACKAGE:"START_BOOKING_PACKAGE",BOOKING_CONFIRMATION_PACKAGE:"BOOKING_CONFIRMATION_PACKAGE",DISPLAY_AD_VIEW:"DISPLAY_AD_VIEW",DISPLAY_AD_CLICK:"DISPLAY_AD_CLICK",META_CLICK:"META_CLICK",IB_CLICK:"IB_CLICK",BL_CLICK:"BL_CLICK",IB_CONVERSION:"IB_CONVERSION",APP_INSTALL:"APP_INSTALL",HOTELS_SP_IMPRESSION:"HOTELS_SP_IMPRESSION",HOTELS_SP_CLICK:"HOTELS_SP_CLICK"},J=e=>{var t=r().getState(),{tracking:n}=t,i={...e};return n.uvmScore&&(i.uvm=n.uvmScore),t.route.geo&&(i.geoid=t.route.geo),i},z=(e,t)=>{"undefined"!=typeof window&&window.require&&window.require(["trjs!taevents"],()=>{if(e&&t&&window.taq){var n=r().getState(),{tracking:i}=n,o=J(t);window.taq("init",481409672),i.retargetingUrl&&window.taq("override",`//${i.retargetingUrl}`),n.route.page&&(o.servlet_name=n.route.page),window.taq("track",e,o)}})},X={__key:0x6eadf0d221b0,id:"6eadf0d221b05f71",loc:{},definitions:[]},Q=e=>{var{children:t,...r}=e;return l(k,{value:r,children:t})},Z=(e,t=0,r=1)=>{var{current:n}=d(()=>{x(e)});return v(n,t,r)};return[()=>{A=y,e("ClickTracker$1",T=class extends a{render(){var e=!this.props.once||!this.state.clicked;return s(this.props.useSpan?"span":"div",{onClick:e?this.click:void 0},this.props.children)}constructor(...e){super(...e),F(this,"state",{clicked:!1}),F(this,"click",e=>{this.props.once&&this.state.clicked||(this.props.forceAjax?A(this.props):D(e,this.props),this.setState({clicked:!0}))})}}),F(T,"defaultProps",{once:!0}),f=T,e("Track",O=class extends a{componentDidMount(){var{mount:e}=this.props;e&&(!e.once||!this.mountTracked)&&(A(e),e.once&&(this.mountTracked=!0))}render(){var e={className:this.props.className},{click:t,visible:r}=this.props;return(!t||t.once&&this.clickTracked||(e.onClick=e=>{D(e,t),this.clickTracked=!0}),r)?r.once?l(g,{onVisible:()=>A(r),children:t=>s(this.props.element,{...e,ref:t},this.props.children)}):l(I,{onChange:e=>{e&&A(r)},children:t=>s(this.props.element,{...e,ref:t},this.props.children)}):s(this.props.element,{...e},this.props.children)}constructor(...e){super(...e),U(this,"mountTracked",!1),U(this,"clickTracked",!1)}}),U(O,"defaultProps",{element:"div",className:void 0}),S=W,C=z,N=c(Object.freeze({})),({Provider:k,Consumer:w}=N),Q.defaultProps={impressionId:void 0,isImpressionLogged:!1},_=class extends a{componentDidMount(){var{isParentComplete:e,logImpression:t}=this.props;e&&t()}componentDidUpdate(e){var{attributes:t,isParentComplete:r,logImpression:n}=this.props,{attributes:i,isParentComplete:o}=e;h(t,i)&&(!r||o)||n()}render(){return null}},e("Impression$1",E=class extends a{handleMutationCompletion(e){var t=e&&e.logImpressions&&e.logImpressions.length>0&&e.logImpressions[0],r={isImpressionLogged:!0,...t?{id:t}:{}};this.setState(r)}render(){var{source:e,attributes:t,children:r}=this.props,{id:n,isImpressionLogged:i}=this.state;return l(w,{children:o=>{var a=t[e],s=Object.keys(o).length>0,c=o.impressionId||null,d=!s||o.isImpressionLogged,I={[e]:a,parentId:c||void 0};return p(u,{children:[l(m,{query:X,children:({executeMutation:e})=>l(_,{attributes:I,isParentComplete:d,logImpression:()=>{a&&(this.setState({isImpressionLogged:!1}),e({impressions:[I]}).then(({data:e})=>e&&this.handleMutationCompletion(e)))}})}),l(Q,{impressionId:n,isImpressionLogged:i,children:r})]})}})}constructor(e){super(e),this.state={id:void 0,isImpressionLogged:!1}}}),e({ClickTracker:f,Impression:E,Track:O,addMevtCookie:H,default:A,holisticEvents:Y,trackClick:D,trackEventAJAXOnPageOnce:x,trackEventCookie:V,trackEventWithContext:S,trackHolisticEvent:C,useGARecordImpression:Z})},[e=>r=e.getStore,e=>n=e.default,e=>i=e.default,e=>o=e.enqueue,e=>(a=e.Component,s=e.createElement,c=e.createContext,d=e.useRef),e=>(l=e.jsx,p=e.jsxs,u=e.Fragment),e=>(I=e.default,g=e.HasBeenVisible),e=>m=e.Mutation,e=>h=e.default,e=>v=e.useOnVisible]]},["45ddp0","5gpqhx","j8lyt5","xj2t7q","o4yt4q","21h32l","w0dpwq","mqwhqn","b5nukb","3btuy0"]]);
