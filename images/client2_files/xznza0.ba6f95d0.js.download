(this.$WP=this.$WP||[]).push(["xznza0",(e,t)=>{var i,a,n,o,r,l,d,c,m,s,u,p,h,v,b,_,g,y,I,f,C,N,k,T,w,S,P,O,D,j,A,M,R,x,z,E,L,U,V,B,W,H,G,Q,F,q,K,J=e=>{var t=[];return e.thumbnail?.photoSizes&&t.push(e.thumbnail.photoSizes),e.photos?.length&&t.push(...e.photos.filter(t=>!!t&&t.id!==e.thumbnail?.id).map(e=>e?.photoSizes).filter(Boolean)),t.slice(0,4)},X=e=>{if(e){var t=s(e);if(t)switch(e.__typename){case"Trips_LocationItemObject":return{id:t,type:"location"};case"Trips_ReviewItemObject":return{id:t,type:"review"};case"Trips_LinkPostItemObject":return{id:t,type:"link"};case"Trips_AttractionItemObject":return{id:t,type:"attractionProduct"};case"Trips_PhotoItemObject":return{id:t,type:"photo"};case"Trips_VideoItemObject":return{id:t,type:"video"};case"Trips_NoteItemObject":return{id:t,type:"note"};case"Trips_ForumPostItemObject":return{id:t,type:"post"};case"Trips_RepostItemObject":return{id:t,type:"repost"};default:return}}},$={container:"XlrGL",imageContainer:"OKOJH o",rightSection:"qICCH",label:"TkvrX",commentSection:"mzFFg",infoSummary:"KQUph k",main:"jNvXQ",bookingInfoMobile:"aQpyM",bookingInfoDesktop:"nKYeH e k",descriptionContainer:"ktrNT"},Y={container:"f e _c",creationDataWrapper:"f Mk"},Z=({children:e,redirectUrl:t,onClick:a,dataAttributes:n})=>t?i(P,{theme:"standalone",href:t??"",target:"_blank","data-automation":n?.["data-automation"],children:e}):a?i(O,{leftAlign:!0,onClick:a,dataAttributes:n,children:e}):e,ee=({title:e,body:t,author:n,date:o,titleOnClick:r,titleRedirectUrl:l})=>{var{localize:d}=A(),m=M(),s=new Date(Date.parse(o??"")),u=isNaN(s.getTime())?null:m.formatDate("date_medium_month_year",s);return a("div",{className:Y.container,children:[!!e&&i(Z,{onClick:r,redirectUrl:l,dataAttributes:{"data-automation":"trip_item_title"},children:i(c,{variant:"title-04",marginBottom:"spacing-01",children:e})}),i(j,{ctaNewline:!0,numLinesToShow:3,webkitLineClamp:!0,collapsible:!0,cta:i(O,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_more_button"},children:d.string("common_Read_more")}),ctaCollapse:i(O,{variant:"primary-small",dataAttributes:{"data-automation":"trip_item_description_read_less_button"},children:d.string("common_Readless")}),children:i(c,{variant:"supporting-01",whiteSpace:"break-spaces",dataAttributes:{"data-automation":"trip_item_description"},children:t})}),(n||u)&&a("div",{className:Y.creationDataWrapper,children:[!!n&&i(c,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_author"},children:n}),!!n&&!!u&&i(c,{variant:"supporting-01",children:`\xa0â€¢\xa0`}),!!u&&i(c,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_date"},children:u})]})]})},et={container:"WXEkr Ra",vertical:"IpaTh",leftSection:"tGwEf _V",rightSection:"KJMLC e",iconButtons:"QTtiI u",icon:"BBkVc u",ctaDesktop:"ltbJg",ctaMobile:"vzZZQ",content:"cvvMk"},ei=({tripId:e,itemId:t,content:n,icon:o,ctaType:l="save",menuOptions:d,saveObject:c,hideMenu:s,comments:p,actionPermissions:h,dataAttributes:v,direction:b="horizontal",onVisible:g,onItemDeleteClick:y,onItemDeleteSuccess:I,onUndoDelete:N,deferredUnsave:k})=>{var{refetch:T}=u(),{localize:w}=A(),[S,P]=r(!1),O=m(()=>P(!0)),j=m(g),M=C(e),[E,L]=r(!1),U=c?.id&&c?.type&&e&&t?i(_,{deferredUnsave:k,tripId:e,itemId:t,saveObject:c,inViewport:S,isOwner:!!h?.canEdit,onSaveComplete:()=>{L(!1),N?.(t),T()},onClick:e=>{"unsave"===e&&(L(!0),y?.(t)),M({itemName:"HeartButtonClick",customData:{itemId:t}})},onUnsaveComplete:()=>{T(),I?.(t),M({itemName:"ConfirmRemoveItemClick",customData:{itemId:t}})}}):null,V=d?i(x,{items:d,above:!0,alignEdge:"right",children:(e,t)=>i(D,{ref:e,"aria-label":w.string("mw_common_menu_fffffd37"),onClick:t,variant:"primary",size:"medium",icon:R})}):void 0,B="save"===l?U:"menu"!==l||s?void 0:V;return E?null:a("div",{className:z(et.container,{[et.vertical]:"vertical"===b}),...v,ref:j,children:[a("div",{className:z(et.leftSection,{[et.vertical]:"vertical"===b}),children:[(o||B)&&a("div",{className:et.iconButtons,children:[o&&i("div",{className:et.icon,children:o}),B&&"vertical"===b&&i("div",{className:et.ctaDesktop,children:B}),B&&i("div",{className:et.ctaMobile,children:B})]}),i("div",{className:et.content,children:n})]}),a("div",{className:z(et.rightSection,{[et.vertical]:"vertical"===b}),ref:O,children:[B&&"horizontal"===b&&i("div",{className:et.ctaDesktop,children:B}),i(f,{tripId:e,itemId:t,comments:p,variant:"CONTENT-CARD",actionPermissions:h})]})]})},ea={itemContainer:"lcxpT f",itemImageContainer:"RmhUi o",itemTextContainer:"NM"},en=({trip:e,item:t,review:o,dataAttributes:r,onVisible:l,onItemDeleteClick:d,onUndoDelete:m})=>{var s=X(t.object),{location:u,rating:p,title:h,text:v,userProfile:b,createdDate:_,route:g}=o,y=a(n,{children:[o.location&&a("div",{className:ea.itemContainer,children:[u?.thumbnail?.photoSizes&&i("div",{className:ea.itemImageContainer,"data-automation":"trip-item-review-image",children:i(S,{source:u.thumbnail?.photoSizes,aspectRatio:"1:1"})}),a("div",{className:ea.itemTextContainer,children:[u?.name&&u?.url&&i(P,{theme:"standalone",href:u.url||"",target:"_blank",children:i(c,{lineClamp:2,variant:"supporting-03",marginBottom:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_name"},children:u.name})}),u?.reviewSummary?.rating&&u?.reviewSummary?.count&&i("div",{"data-automation":"trip_item_location_bubble_rating",children:i(T,{size:"small",rating:u.reviewSummary?.rating,numReviews:u.reviewSummary?.count})}),i(c,{variant:"supporting-01",marginTop:"spacing-02",dataAttributes:{"data-automation":"trip_item_location_geo_name"},children:u?.geoName})]})]}),p&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(w,{rating:p,marginBottom:"spacing-01",size:"small"})}),i(ee,{title:h||"",body:v||"",author:b?.username||"",date:_||"",titleRedirectUrl:g?.url||""})]});return i(ei,{deferredUnsave:!0,tripId:e.id,icon:i(k,{color:"onLightText",size:22}),saveObject:s,content:y,itemId:t.id,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:r,onVisible:l,onItemDeleteClick:d,onUndoDelete:m})},eo=({trip:e,item:t,post:a,dataAttributes:n,onVisible:o,onItemDeleteClick:r,onUndoDelete:l})=>{var d=X(t.object),c=i(ee,{title:a.topicTitle||"",body:a.body||"",author:a.userProfile?.displayName||"",date:a.publishedDate||"",titleRedirectUrl:a.route?.url||""}),m=i(E,{});return i(ei,{deferredUnsave:!0,tripId:e.id,itemId:t.id,content:c,saveObject:d,ctaType:"save",icon:m,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:n,onVisible:o,onItemDeleteClick:r,onUndoDelete:l})},er=(e,t,i)=>t?"Media_PhotoResult"===t.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,photoSource:t.photoSizeDynamic??null,caption:t.caption??null,id:t.photoId??null,author:t.memberProfile?.displayName??null,attribution:t.attribution?.text??null}:"Media_VideoResult"===t.__typename?{locationName:i?.localizedName??null,reviewSummary:i?.reviewSummary??null,id:t.videoId??null,videoThumbnail:t?.thumbnails?.[0]?.url??null,videoSources:t.sources??null,caption:t.caption??null,author:t.memberProfile?.displayName??null,attribution:t.attribution?.text??null}:null:null,el=({imageSource:e,onModalClose:t})=>i(U,{widthOption:e.maxHeight>e.maxWidth?"variable":"fixed-60",onClose:t,children:i("div",{"data-automation":"trip_item_modal_photo",children:i(S,{source:e})})}),ed=({videoSources:e,onModalClose:t})=>i(U,{widthOption:"fixed-60",variant:"variable-height",onClose:t,children:i("video",{controls:!0,controlsList:"nodownload",muted:!0,autoPlay:!0,playsInline:!0,disablePictureInPicture:!0,width:"100%",height:"100%","data-automation":"trip_item_modal_video",children:e?.map(e=>i("source",{width:e.width,height:e.height,src:e.url},e.url))})}),ec={aboveImageContentWrapper:"MJ",imageWrapper:"ORoTW o",belowImageContentWrapper:"f K Q1 Mk",expandIcon:"VScLx Gi"},em=({trip:e,item:t,media:o,photoVideoLocationsMap:l,dataAttributes:d,onVisible:m,onItemDeleteClick:s,onUndoDelete:u})=>{var p=X(t.object),h=t.object?.__typename==="Trips_PhotoItemObject"?"PHOTO":"VIDEO",v=null;"Media_VideoResult"===o.__typename?v=l?.get(Number(o.locationId))||null:"Media_PhotoResult"===o.__typename&&(v=l?.get(Number(o.locationId))||null);var[b,_]=r(!1),g=q(h,o,v),y="PHOTO"===h,I="VIDEO"===h;return!g||y&&(!g.photoSource||null===g.photoSource.urlTemplate||null===g.photoSource.maxHeight||null===g.photoSource.maxWidth)||I&&(null===g.videoPageUrl||null===g.videoThumbnail)?null:a(n,{children:[i(ei,{deferredUnsave:!0,tripId:e.id,saveObject:p,itemId:t.id,comments:t.comments,actionPermissions:e.actionPermissions,dataAttributes:d,onItemDeleteClick:s,onUndoDelete:u,content:a("div",{children:[!!g.locationName&&a("div",{className:ec.aboveImageContentWrapper,children:[i(c,{variant:"title-04",dataAttributes:{"data-automation":"trip_item_location_name"},children:g.locationName??""}),!!g.reviewSummary?.count&&!!g.reviewSummary?.rating&&i("div",{"data-automation":"trip_item_bubble_rating",children:i(T,{size:"small",numReviews:g.reviewSummary.count,rating:g.reviewSummary.rating})})]}),a("div",{className:ec.imageWrapper,children:[y&&a(n,{children:[i("div",{className:ec.expandIcon,children:i(O,{onClick:()=>_(!0),dataAttributes:{"data-automation":"trip_item_expand_photo"},children:i(L,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_photo_image",children:i(S,{height:135,source:g.photoSource})})]}),I&&a(n,{children:[i("div",{className:ec.expandIcon,children:i(O,{onClick:()=>_(!0),dataAttributes:{"data-automation":"trip_item_expand_video"},children:i(L,{size:24,color:"primaryIcon"})})}),i("div",{"data-automation":"trip_item_video_thumbnail",children:i(S,{height:135,source:g.videoThumbnail})})]})]}),(!!g?.author||!!g?.caption||!!g?.attribution)&&a("div",{className:ec.belowImageContentWrapper,children:[!!g.author&&i(c,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_posted_by"},children:`Posted by ${g.author}`}),!g.author&&!!g?.attribution&&i(c,{variant:"supporting-03",dataAttributes:{"data-automation":"trip_item_attribution"},children:g?.attribution}),""!==g.caption&&i(c,{variant:"supporting-01",dataAttributes:{"data-automation":"trip_item_caption"},children:g.caption??""})]})]}),onVisible:m}),I&&b&&i(ed,{videoSources:g.videoSources,onModalClose:()=>_(!1)}),y&&b&&i(el,{imageSource:g.photoSource,onModalClose:()=>_(!1)})]})},es=(e,t)=>e?t?{title:e.preview?.title??null,body:e.preview?.canonicalUrl??null,author:e.userProfile?.displayName??null,date:e.updated??null}:{title:e.title??null,body:e.body??null,author:e.author?.displayName??null,date:e.updated??null,authorId:e.author?.userId??null}:null,eu={__key:53015879390920,id:"3037b8a896c818b4",loc:{},definitions:[]},ep={__key:33999642884397,id:"1eec28a2f92d2562",loc:{},definitions:[]},eh=e=>e.object?.__typename==="Trips_LinkPostItemObject"?e.object.linkPostId:e.object?.__typename==="Trips_NoteItemObject"?e.object.noteId:null,ev=({trip:e,item:t,note:o,dataAttributes:l,onVisible:c,onItemDeleteClick:m,onUndoDelete:s,deleteFlow:u="singleNote"})=>{var[h,v]=r(!1),b=d(!0),_=t.object?.__typename==="Trips_LinkPostItemObject",g=eh(t),[y,I]=r(!1),f=K(o,_??!1),[{fetching:C},k]=p(eu),[{fetching:T},w]=p(ep),S=N(e.id),{launchErrorToast:P,launchItemRemovedToast:O}=B(),D=Q(),j=e.actionPermissions?.canEdit&&f?.authorId===D,A=t.id??0;if(!f||!f.body||h)return null;var M=()=>{C||T||("full"===u?w({tripId:e.id,reference:{id:`${t.reference?.id||A}`,type:t.reference?.type??"note"}}):k({itemId:A,tripId:e.id})).then(e=>{if(e.error)throw e.error;S({itemName:"RemoveNote"})}).catch(()=>{P()})},R=[{onClick:()=>{v(!0),b.current=!0,m?.(A),O(e.title??void 0,()=>(b.current=!1,v(!1),s?.(A),Promise.resolve({})),()=>{b.current&&M()})},content:"Delete note",key:"delete-note",icon:G,iconColor:"dangerIcon",textColor:"dangerText",dataAttributes:{"data-automation":"trip_item_delete_note"}}];return _||R.unshift({onClick:()=>I(!0),content:"Edit Note",key:"edit-note",icon:H,dataAttributes:{"data-automation":"trip_item_edit_note"}}),a(n,{children:[!_&&y&&i(W,{variant:"EDIT",noteId:g??0,noteTitle:f.title??"",noteBody:f.body??"",onClose:()=>I(!1)}),i(ei,{tripId:e.id,itemId:t.id,comments:t.comments,ctaType:"menu",direction:"vertical",menuOptions:R,icon:i(V,{}),actionPermissions:e.actionPermissions,dataAttributes:l,onItemDeleteClick:m,onUndoDelete:s,content:i(ee,{titleOnClick:!_&&j?()=>I(!0):null,titleRedirectUrl:_?f.body:null,title:f.title??null,body:f.body,author:f.author??null,date:f.date??null}),hideMenu:_?!e.actionPermissions?.canEdit:!j,onVisible:c})]})};return[()=>{F=o(({trip:e,item:t,location:n,dataAttributes:o,restaurantsHourOptionsMap:d,onCommerceClick:s,onVisible:p,onItemDeleteClick:N,onUndoDelete:k},T)=>{var{refetch:w}=u(),[S,P]=r(!1),[O,D]=r(!1),j=m(()=>{p?.(),P(!0)}),A=C(e.id),M=X(t.object),R=t.comments||[],x="GENERATIVE_AI"===t.creationMethod,z=l(()=>{var e="ACCOMMODATION"===n.placeType&&"HOTEL"===n.accommodationCategory;return(!x||!e||!!t.narrativeDescription?.plainText)&&x},[x,t.narrativeDescription?.plainText,n.accommodationCategory,n.placeType]),E=z?t.narrativeDescription?.plainText:n.locationDescription,L=l(()=>J(n),[n]),U=h(n),{awardType:V,year:B}=n.locationV2?.bestAwardForActiveYearV2||{},W=i(v,{tripItem:n,trip:e,isAIGenerated:x,recommendedProduct:t.recommendedProduct,pauseQuery:!S,onCommerceClick:s});return O?null:a("div",{ref:T,className:$.container,...o,children:[i("div",{children:i("div",{className:$.imageContainer,"data-automation":"trip_item_carousel_image",children:i(b,{itemLink:n.route?.url||"",photos:L,action:M?.id&&M?.type&&e?.id&&t?.id?i(_,{deferredUnsave:!0,tripId:e.id,itemId:t.id,saveObject:M,inViewport:S,isOwner:!!e.actionPermissions?.canEdit,onSaveComplete:()=>{D(!1),t.id&&k?.(t.id),w()},onClick:e=>{"unsave"===e&&(D(!0),t.id&&N?.(t.id)),A({itemName:"HeartButtonClick",customData:{itemId:t.id}})},onUnsaveComplete:()=>{w(),A({itemName:"ConfirmRemoveItemClick",customData:{itemId:t.id}})}}):null,travelersChoiceAwardData:V&&B?{awardType:V,awardYear:B}:void 0})})}),a("div",{className:$.rightSection,ref:j,children:[a("div",{className:$.infoSummary,children:[a("div",{className:$.main,children:[i(g,{title:n.name,content:i(y,{item:n,variant:"extended",pauseQuery:!S,restaurantsHourOptionsMap:d,tripDateType:e.date?.type}),labels:n.isGeo?null:n.geoName&&i("span",{"data-automation":"trip_item_label",children:i("div",{className:$.label,children:i(c,{variant:"label-01",color:"inherit",elementType:"span",children:n.geoName})})}),itemLink:n.route?.url||"",reviewData:U}),E&&i("div",{className:$.descriptionContainer,children:i(I,{descriptionText:E||"",isAIGenerated:z})}),i("div",{className:$.bookingInfoMobile,"data-automation":"trip_item_commerce_info_mobile",children:W})]}),i("div",{className:$.bookingInfoDesktop,"data-automation":"trip_item_commerce_info_desktop",children:W})]}),i("div",{className:$.commentSection,children:i(f,{tripId:e.id,itemId:t.id,comments:R,variant:"IMAGE-CARD",actionPermissions:e.actionPermissions})})]})]})}),q=er,K=es,e({ForumPostCard:eo,LocationCard:F,NoteCard:ev,PhotoVideoCard:em,ReviewCard:en,getLocationPhotos:J,getSATDModalSaveObject:X})},[e=>(i=e.jsx,a=e.jsxs,n=e.Fragment),e=>(o=e.forwardRef,r=e.useState,l=e.useMemo,d=e.useRef),e=>c=e.default,e=>m=e.useOnVisible,e=>(s=e.getItemReferenceId,u=e.useTrip,p=e.useTripMutation),e=>(h=e.getLocationReviewData,v=e.TripLocationCommerceElement,b=e.CardMediaElement,_=e.CardSaveButton,g=e.CardHeaderElement,y=e.TripLocationIconContent,I=e.CardDescriptionElement,f=e.CardCommentElement),e=>(C=e.useSavesInteractionLogger,N=e.useManagementImpressionLogger),e=>k=e.default,e=>(T=e.BubbleRatingWithReviewCount,w=e.BubbleRating),e=>S=e.default,e=>P=e.default,e=>(O=e.BorderlessButton,D=e.CircularButton),e=>j=e.ReadMore,e=>(A=e.useLocalize,M=e.useIntlFormatter),e=>R=e.default,e=>x=e.PopoverMenu,e=>z=e.default,e=>E=e.default,e=>L=e.default,e=>U=e.Modal,e=>V=e.default,e=>B=e.default,e=>W=e.AddOrEditNoteModal,e=>H=e.default,e=>G=e.default,e=>Q=e.useUserId]]},["21h32l","o4yt4q","essqvy","3btuy0","r6ayw2","9l2zsy","sa2a6q","nute5e","bkeq24","34bu7w","lr6tb6","jppfwt","wgun1f","7thqz4","mvpl5y","s2gl90","fkji80","7bjcrr","74j83y","i3sz5h","d5rizv","x0lcjw","5h0me9","55gplo","d3i8k1","52far5"]]);
